{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///mnt/windows_d/manov/code/polytix-v1/components/ui/tabs.jsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Tabs({\n  className,\n  ...props\n}) {\n  return (\n    (<TabsPrimitive.Root\n      data-slot=\"tabs\"\n      className={cn(\"flex flex-col gap-2\", className)}\n      {...props} />)\n  );\n}\n\nfunction TabsList({\n  className,\n  ...props\n}) {\n  return (\n    (<TabsPrimitive.List\n      data-slot=\"tabs-list\"\n      className={cn(\n        \"bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]\",\n        className\n      )}\n      {...props} />)\n  );\n}\n\nfunction TabsTrigger({\n  className,\n  ...props\n}) {\n  return (\n    (<TabsPrimitive.Trigger\n      data-slot=\"tabs-trigger\"\n      className={cn(\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props} />)\n  );\n}\n\nfunction TabsContent({\n  className,\n  ...props\n}) {\n  return (\n    (<TabsPrimitive.Content\n      data-slot=\"tabs-content\"\n      className={cn(\"flex-1 outline-none\", className)}\n      {...props} />)\n  );\n}\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,SAAS,KAAK,EACZ,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC,mKAAA,CAAA,OAAkB;QAClB,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAEf;KAVS;AAYT,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC,mKAAA,CAAA,OAAkB;QAClB,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,uGACA;QAED,GAAG,KAAK;;;;;;AAEf;MAbS;AAeT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC,mKAAA,CAAA,UAAqB;QACrB,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,mqBACA;QAED,GAAG,KAAK;;;;;;AAEf;MAbS;AAeT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC,mKAAA,CAAA,UAAqB;QACrB,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAEf;MAVS","debugId":null}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///mnt/windows_d/manov/code/polytix-v1/components/ui/card.jsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({\n  className,\n  ...props\n}) {\n  return (\n    (<div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props} />)\n  );\n}\n\nfunction CardHeader({\n  className,\n  ...props\n}) {\n  return (\n    (<div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props} />)\n  );\n}\n\nfunction CardTitle({\n  className,\n  ...props\n}) {\n  return (\n    (<div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props} />)\n  );\n}\n\nfunction CardDescription({\n  className,\n  ...props\n}) {\n  return (\n    (<div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props} />)\n  );\n}\n\nfunction CardAction({\n  className,\n  ...props\n}) {\n  return (\n    (<div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props} />)\n  );\n}\n\nfunction CardContent({\n  className,\n  ...props\n}) {\n  return (<div data-slot=\"card-content\" className={cn(\"px-6\", className)} {...props} />);\n}\n\nfunction CardFooter({\n  className,\n  ...props\n}) {\n  return (\n    (<div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props} />)\n  );\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AAEA;;;;AAEA,SAAS,KAAK,EACZ,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,qFACA;QAED,GAAG,KAAK;;;;;;AAEf;KAbS;AAeT,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,8JACA;QAED,GAAG,KAAK;;;;;;AAEf;MAbS;AAeT,SAAS,UAAU,EACjB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAEf;MAVS;AAYT,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAEf;MAVS;AAYT,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,kEACA;QAED,GAAG,KAAK;;;;;;AAEf;MAbS;AAeT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACJ;IACC,qBAAQ,6LAAC;QAAI,aAAU;QAAe,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,QAAQ;QAAa,GAAG,KAAK;;;;;;AACnF;MALS;AAOT,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAEf;MAVS","debugId":null}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file:///mnt/windows_d/manov/code/polytix-v1/components/ui/badge.jsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}) {\n  const Comp = asChild ? Slot : \"span\"\n\n  return (\n    (<Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props} />)\n  );\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB,kZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OACJ;IACC,MAAM,OAAO,UAAU,mKAAA,CAAA,OAAI,GAAG;IAE9B,qBACG,6LAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAEf;KAdS","debugId":null}},
    {"offset": {"line": 256, "column": 0}, "map": {"version":3,"sources":["file:///mnt/windows_d/manov/code/polytix-v1/components/ui/skeleton.jsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}) {\n  return (\n    (<div\n      data-slot=\"skeleton\"\n      className={cn(\"bg-accent animate-pulse rounded-md\", className)}\n      {...props} />)\n  );\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;AAAA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAEf;KAVS","debugId":null}},
    {"offset": {"line": 287, "column": 0}, "map": {"version":3,"sources":["file:///mnt/windows_d/manov/code/polytix-v1/components/ui/alert.jsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-card text-card-foreground\",\n        destructive:\n          \"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Alert({\n  className,\n  variant,\n  ...props\n}) {\n  return (\n    (<div\n      data-slot=\"alert\"\n      role=\"alert\"\n      className={cn(alertVariants({ variant }), className)}\n      {...props} />)\n  );\n}\n\nfunction AlertTitle({\n  className,\n  ...props\n}) {\n  return (\n    (<div\n      data-slot=\"alert-title\"\n      className={cn(\"col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight\", className)}\n      {...props} />)\n  );\n}\n\nfunction AlertDescription({\n  className,\n  ...props\n}) {\n  return (\n    (<div\n      data-slot=\"alert-description\"\n      className={cn(\n        \"text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed\",\n        className\n      )}\n      {...props} />)\n  );\n}\n\nexport { Alert, AlertTitle, AlertDescription }\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB,qOACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,GAAG,OACJ;IACC,qBACG,6LAAC;QACA,aAAU;QACV,MAAK;QACL,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAEf;KAZS;AAcT,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,+DAA+D;QAC5E,GAAG,KAAK;;;;;;AAEf;MAVS;AAYT,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,kGACA;QAED,GAAG,KAAK;;;;;;AAEf;MAbS","debugId":null}},
    {"offset": {"line": 364, "column": 0}, "map": {"version":3,"sources":["file:///mnt/windows_d/manov/code/polytix-v1/components/ui/input.jsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({\n  className,\n  type,\n  ...props\n}) {\n  return (\n    (<input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props} />)\n  );\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,SAAS,MAAM,EACb,SAAS,EACT,IAAI,EACJ,GAAG,OACJ;IACC,qBACG,6LAAC;QACA,MAAM;QACN,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,mcACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAEf;KAjBS","debugId":null}},
    {"offset": {"line": 398, "column": 0}, "map": {"version":3,"sources":["file:///mnt/windows_d/manov/code/polytix-v1/components/ui/label.jsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Label({\n  className,\n  ...props\n}) {\n  return (\n    (<LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n        className\n      )}\n      {...props} />)\n  );\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC,oKAAA,CAAA,OAAmB;QACnB,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,uNACA;QAED,GAAG,KAAK;;;;;;AAEf;KAbS","debugId":null}},
    {"offset": {"line": 434, "column": 0}, "map": {"version":3,"sources":["file:///mnt/windows_d/manov/code/polytix-v1/components/ui/textarea.jsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Textarea({\n  className,\n  ...props\n}) {\n  return (\n    (<textarea\n      data-slot=\"textarea\"\n      className={cn(\n        \"border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      {...props} />)\n  );\n}\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,ucACA;QAED,GAAG,KAAK;;;;;;AAEf;KAbS","debugId":null}},
    {"offset": {"line": 467, "column": 0}, "map": {"version":3,"sources":["file:///mnt/windows_d/manov/code/polytix-v1/app/campaigns/%5Bid%5D/register-tab.jsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle, CardFooter } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\"\nimport { AlertCircle, CheckCircle, Key, UserPlus, User, FileImage, MessageSquare, Loader2 } from \"lucide-react\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { toast } from \"sonner\"\n\nexport default function RegisterTab({\n  campaignInfo,\n  contract,\n  campaignId,\n  isConnected,\n  connectWallet,\n  onRegistrationSuccess,\n}) {\n  const [passKey, setPassKey] = useState(\"\")\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [error, setError] = useState(null)\n  const [success, setSuccess] = useState(null)\n  const [registrationType, setRegistrationType] = useState(\"voter\")\n\n  // Candidate registration fields\n  const [candidateName, setCandidateName] = useState(\"\")\n  const [candidateStatement, setCandidateStatement] = useState(\"\")\n  const [candidateImage, setCandidateImage] = useState(\"\")\n  const [candidatePassKey, setCandidatePassKey] = useState(\"\")\n  const [imageUploading, setImageUploading] = useState(false)\n\n  const handleRegisterAsVoter = async () => {\n    if (!isConnected) {\n      await connectWallet()\n      return\n    }\n\n    if (campaignInfo.restriction === 2 && !passKey.trim()) {\n      setError(\"Please enter the required passkey\")\n      return\n    }\n\n    try {\n      setIsSubmitting(true)\n      setError(null)\n      setSuccess(null)\n\n      // Call contract to register\n      const tx = await contract.registerToVote(campaignId, passKey)\n      await tx.wait()\n\n      setSuccess(\"You have successfully registered for this campaign!\")\n\n      // Notify parent component\n      if (onRegistrationSuccess) {\n        setTimeout(() => {\n          onRegistrationSuccess()\n        }, 2000)\n      }\n    } catch (err) {\n      console.error(\"Error registering:\", err)\n      setError(\"Failed to register. Please check your passkey and try again.\")\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  const handleImageUpload = async (e) => {\n    const file = e.target.files[0]\n    if (!file) return\n\n    try {\n      setImageUploading(true)\n\n      // Create form data for file upload\n      const formData = new FormData()\n      formData.append(\"file\", file)\n\n      // Upload to our API endpoint\n      const response = await fetch(\"/api/upload\", {\n        method: \"POST\",\n        body: formData,\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || \"Failed to upload image\")\n      }\n\n      // Use the IPFS hash returned from the API\n      setCandidateImage(data.ipfsHash)\n      toast.success(\"Image uploaded successfully to IPFS!\")\n    } catch (error) {\n      console.error(\"Error uploading image:\", error)\n      toast.error(\"Failed to upload image. Please try again.\")\n    } finally {\n      setImageUploading(false)\n    }\n  }\n\n  const handleRegisterAsCandidate = async () => {\n    if (!isConnected) {\n      await connectWallet()\n      return\n    }\n\n    // Validate inputs\n    if (!candidateName.trim()) {\n      setError(\"Please enter your name\")\n      return\n    }\n\n    if (!candidateStatement.trim()) {\n      setError(\"Please enter your statement\")\n      return\n    }\n\n    if (campaignInfo.restriction === 2 && !candidatePassKey.trim()) {\n      setError(\"Please enter the required passkey\")\n      return\n    }\n\n    try {\n      setIsSubmitting(true)\n      setError(null)\n      setSuccess(null)\n\n      // Call contract to register as candidate\n      const tx = await contract.registerAsCandidate(\n        campaignId,\n        candidateName,\n        candidateStatement,\n        candidateImage || \"no-image\", // Use a default if no image was uploaded\n        candidatePassKey,\n      )\n      await tx.wait()\n\n      setSuccess(\"You have successfully registered as a candidate for this campaign!\")\n\n      // Notify parent component\n      if (onRegistrationSuccess) {\n        setTimeout(() => {\n          onRegistrationSuccess()\n        }, 2000)\n      }\n    } catch (err) {\n      console.error(\"Error registering as candidate:\", err)\n      setError(\"Failed to register as candidate. Please check your inputs and try again.\")\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  if (!isConnected) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <UserPlus className=\"h-5 w-5 text-primary\" />\n            Connect Wallet to Register\n          </CardTitle>\n          <CardDescription>You need to connect your wallet to register for this campaign</CardDescription>\n        </CardHeader>\n        <CardContent className=\"text-center py-8\">\n          <UserPlus className=\"h-16 w-16 mx-auto text-muted-foreground/50 mb-4\" />\n          <p className=\"text-muted-foreground mb-6\">Connect your wallet to register and participate in this campaign</p>\n          <Button onClick={connectWallet}>Connect Wallet</Button>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <UserPlus className=\"h-5 w-5 text-primary\" />\n          Register for Campaign\n        </CardTitle>\n        <CardDescription>Register to participate in this campaign</CardDescription>\n      </CardHeader>\n      <CardContent>\n        {error && (\n          <Alert variant=\"destructive\" className=\"mb-4\">\n            <AlertCircle className=\"h-4 w-4\" />\n            <AlertTitle>Error</AlertTitle>\n            <AlertDescription>{error}</AlertDescription>\n          </Alert>\n        )}\n\n        {success && (\n          <Alert className=\"bg-green-50 text-green-800 border-green-200 mb-4\">\n            <CheckCircle className=\"h-4 w-4 text-green-500\" />\n            <AlertTitle>Success</AlertTitle>\n            <AlertDescription>{success}</AlertDescription>\n          </Alert>\n        )}\n\n        <Tabs defaultValue=\"voter\" onValueChange={setRegistrationType} className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-2 mb-6\">\n            <TabsTrigger value=\"voter\">Register as Voter</TabsTrigger>\n            {campaignInfo.votingType === 0 && ( // Only show for candidate-based campaigns\n              <TabsTrigger value=\"candidate\">Register as Candidate</TabsTrigger>\n            )}\n          </TabsList>\n\n          <TabsContent value=\"voter\">\n            <div className=\"space-y-4\">\n              {campaignInfo.restriction === 2 && (\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"passkey\">Passkey</Label>\n                  <div className=\"relative\">\n                    <Key className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\n                    <Input\n                      id=\"passkey\"\n                      type=\"password\"\n                      placeholder=\"Enter campaign passkey\"\n                      className=\"pl-9\"\n                      value={passKey}\n                      onChange={(e) => setPassKey(e.target.value)}\n                    />\n                  </div>\n                  <p className=\"text-xs text-muted-foreground\">\n                    Enter the passkey provided by the campaign creator to register.\n                  </p>\n                </div>\n              )}\n\n              <div className=\"p-4 bg-muted/30 rounded-lg\">\n                <h3 className=\"text-sm font-medium mb-2\">About Voter Registration</h3>\n                <ul className=\"text-sm text-muted-foreground space-y-2\">\n                  <li>• By registering, you will receive an NFT representing your voting right</li>\n                  <li>• This NFT proves your eligibility to participate in this campaign</li>\n                  <li>• Registration must be completed before voting begins</li>\n                </ul>\n              </div>\n            </div>\n          </TabsContent>\n\n          {campaignInfo.votingType === 0 && (\n            <TabsContent value=\"candidate\">\n              <div className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"candidate-name\">Your Name</Label>\n                  <div className=\"relative\">\n                    <User className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\n                    <Input\n                      id=\"candidate-name\"\n                      placeholder=\"Enter your name\"\n                      className=\"pl-9\"\n                      value={candidateName}\n                      onChange={(e) => setCandidateName(e.target.value)}\n                    />\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"candidate-statement\">Why Vote For You?</Label>\n                  <div className=\"relative\">\n                    <MessageSquare className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\n                    <Textarea\n                      id=\"candidate-statement\"\n                      placeholder=\"Share why people should vote for you\"\n                      className=\"pl-9 min-h-[120px]\"\n                      value={candidateStatement}\n                      onChange={(e) => setCandidateStatement(e.target.value)}\n                    />\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"candidate-image\">Profile Image</Label>\n                  <div className=\"flex items-center gap-3\">\n                    <Button\n                      variant=\"outline\"\n                      className=\"relative\"\n                      disabled={imageUploading}\n                      onClick={() => document.getElementById(\"image-upload\").click()}\n                    >\n                      {imageUploading ? (\n                        <>\n                          <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                          Uploading...\n                        </>\n                      ) : (\n                        <>\n                          <FileImage className=\"h-4 w-4 mr-2\" />\n                          Upload Image\n                        </>\n                      )}\n                    </Button>\n                    <input\n                      id=\"image-upload\"\n                      type=\"file\"\n                      accept=\"image/*\"\n                      className=\"hidden\"\n                      onChange={handleImageUpload}\n                    />\n                    {candidateImage && (\n                      <div className=\"text-sm text-muted-foreground flex items-center\">\n                        <span>IPFS: {candidateImage.substring(0, 10)}...</span>\n                        {candidateImage && (\n                          <a \n                            href={`https://gateway.pinata.cloud/ipfs/${candidateImage}`} \n                            target=\"_blank\" \n                            rel=\"noopener noreferrer\"\n                            className=\"text-primary ml-2 text-xs hover:underline\"\n                          >\n                            View\n                          </a>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                  <p className=\"text-xs text-muted-foreground\">\n                    Upload a profile image to represent you in the campaign (optional).\n                  </p>\n                </div>\n\n                {campaignInfo.restriction === 2 && (\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"candidate-passkey\">Passkey</Label>\n                    <div className=\"relative\">\n                      <Key className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\n                      <Input\n                        id=\"candidate-passkey\"\n                        type=\"password\"\n                        placeholder=\"Enter campaign passkey\"\n                        className=\"pl-9\"\n                        value={candidatePassKey}\n                        onChange={(e) => setCandidatePassKey(e.target.value)}\n                      />\n                    </div>\n                    <p className=\"text-xs text-muted-foreground\">\n                      Enter the passkey provided by the campaign creator to register.\n                    </p>\n                  </div>\n                )}\n\n                <div className=\"p-4 bg-muted/30 rounded-lg\">\n                  <h3 className=\"text-sm font-medium mb-2\">About Candidate Registration</h3>\n                  <ul className=\"text-sm text-muted-foreground space-y-2\">\n                    <li>• By registering as a candidate, you'll be eligible to receive votes</li>\n                    <li>• Your name and statement will be visible to all voters</li>\n                    <li>• You'll also be registered as a voter automatically</li>\n                    <li>• Candidate registration must be completed before voting begins</li>\n                  </ul>\n                </div>\n              </div>\n            </TabsContent>\n          )}\n        </Tabs>\n      </CardContent>\n      <CardFooter>\n        <Button\n          className=\"w-full\"\n          onClick={registrationType === \"voter\" ? handleRegisterAsVoter : handleRegisterAsCandidate}\n          disabled={\n            (registrationType === \"voter\" && campaignInfo.restriction === 2 && !passKey.trim()) ||\n            (registrationType === \"candidate\" &&\n              (!candidateName.trim() ||\n                !candidateStatement.trim() ||\n                (campaignInfo.restriction === 2 && !candidatePassKey.trim()))) ||\n            isSubmitting\n          }\n        >\n          {isSubmitting ? (\n            <>\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              {registrationType === \"voter\" ? \"Registering...\" : \"Registering as Candidate...\"}\n            </>\n          ) : registrationType === \"voter\" ? (\n            \"Register for Campaign\"\n          ) : (\n            \"Register as Candidate\"\n          )}\n        </Button>\n      </CardFooter>\n    </Card>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1306, "column": 0}, "map": {"version":3,"sources":["file:///mnt/windows_d/manov/code/polytix-v1/app/campaigns/%5Bid%5D/results-tab.jsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from 'react';\n// Added Image and Users icons\nimport { List, Trophy, AlertCircle, Clock, Users } from 'lucide-react';\nimport Image from 'next/image'; // Import Next.js Image component\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip as RechartsTooltip,\n  ResponsiveContainer,\n  PieChart,\n  Pie,\n  Cell,\n  Legend\n} from 'recharts';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\";\n// Assuming resolveIpfsUrl is in your utils\nimport { formatAddress, resolveIpfsUrl } from '@/lib/utils';\n\n// Helper function for text truncation\nconst truncateText = (text, maxLength = 50) => {\n  if (!text) return \"\";\n  if (text.length <= maxLength) return text;\n  return text.substring(0, maxLength) + \"...\";\n};\n\n// --- Enhanced Color Palette with 10 unique colors ---\nconst CHART_COLORS = [\n  '#3b82f6', // blue-500\n  '#10b981', // emerald-500\n  '#f59e0b', // amber-500\n  '#ec4899', // pink-500\n  '#8b5cf6', // violet-500\n  '#6366f1', // indigo-500\n  '#06b6d4', // cyan-500\n  '#f97316', // orange-500\n  '#14b8a6', // teal-500\n  '#ef4444', // red-500\n];\n\nconst ResultsTab = ({\n  campaignInfo,\n  proposals = [],\n  candidates = [],\n  isOwner = false,\n  isDuringVoting = false,\n  isAfterEnd = false \n}) => {\n  const [activeIndex, setActiveIndex] = useState(null); // For Pie chart hover\n  const [hoveredBar, setHoveredBar] = useState(null);   // For Bar chart hover\n\n  // --- Data Preparation ---\n  const safeProposals = Array.isArray(proposals) ? proposals : [];\n  const safeCandidates = Array.isArray(candidates) ? candidates : [];\n\n  // Sort data for ranked display\n  const sortedProposals = [...safeProposals].sort((a, b) => (b.voteCount ?? 0) - (a.voteCount ?? 0));\n  const sortedCandidates = [...safeCandidates].sort((a, b) => (b.voteCount ?? 0) - (a.voteCount ?? 0));\n\n  // --- Winner Status Calculation ---\n  const getWinnerStatus = () => {\n    if (!campaignInfo) return { hasTie: false, hasWinner: false, tiedWinners: [] };\n    const items = campaignInfo.votingType === 1 ? sortedProposals : sortedCandidates;\n    if (items.length === 0) return { hasTie: false, hasWinner: false, tiedWinners: [] };\n\n    const highestVotes = items[0]?.voteCount || 0;\n    const validItems = items.filter(item => typeof item.voteCount === 'number');\n    const tiedWinners = validItems.filter(item => item.voteCount === highestVotes);\n\n    return {\n      hasTie: highestVotes > 0 && tiedWinners.length > 1,\n      hasWinner: highestVotes > 0,\n      tiedWinners,\n    };\n  };\n  const winnerStatus = getWinnerStatus();\n\n  // --- Chart Data Preparation ---\n  const prepareChartData = () => {\n    const totalVotes = campaignInfo?.totalVotes || 0;\n    const items = campaignInfo?.votingType === 1 ? sortedProposals : sortedCandidates;\n\n    return items.map((item, idx) => {\n      const votes = item.voteCount ?? 0;\n      const percentage = totalVotes > 0 ? (votes / totalVotes) * 100 : 0;\n      const isCandidateType = campaignInfo?.votingType === 0;\n\n      return {\n        id: item.id || `${isCandidateType ? 'candidate' : 'proposal'}-${idx}`, // Robust unique ID\n        name: isCandidateType ? item.name : truncateText(item.content, 30),\n        fullContent: isCandidateType ? item.name : item.content,\n        votes: votes,\n        percentage: percentage.toFixed(1),\n        color: CHART_COLORS[idx % CHART_COLORS.length],\n        // Include imageHash ONLY for candidates\n        imageHash: isCandidateType ? (item.imageHash || \"no-image\") : undefined,\n      };\n    });\n  };\n  const chartData = prepareChartData();\n\n  // --- Custom Tooltip Components ---\n  const CustomBarTooltip = ({ active, payload }) => {\n    if (active && payload && payload.length) {\n      const data = payload[0].payload;\n      const content = data.fullContent || data.name;\n      return (\n        <div className=\"bg-background shadow-lg rounded-md p-3 border border-border text-sm max-w-xs\">\n          <p className=\"font-medium mb-1 break-words\">{truncateText(content, 100)}</p>\n          <div className=\"flex justify-between items-center mt-2 pt-2 border-t border-border\">\n            <span className=\"text-muted-foreground\">Votes:</span>\n            <span className=\"font-medium text-primary\">{payload[0].value}</span>\n          </div>\n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-muted-foreground\">Percentage:</span>\n            <span className=\"font-medium\">{data.percentage}%</span>\n          </div>\n        </div>\n      );\n    }\n    return null;\n  };\n\n  const CustomPieTooltip = ({ active, payload }) => {\n    if (active && payload && payload.length) {\n      const data = payload[0].payload;\n      const content = data.fullContent || data.name;\n      return (\n        <div className=\"bg-background shadow-lg rounded-md p-3 border border-border text-sm max-w-xs\">\n          <p className=\"font-medium mb-1 break-words\">{truncateText(content, 100)}</p>\n          <div className=\"flex justify-between items-center mt-2 pt-2 border-t border-border\">\n            <span className=\"text-muted-foreground\">Votes:</span>\n            <span className=\"font-medium\">{data.votes}</span>\n          </div>\n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-muted-foreground\">Percentage:</span>\n            <span className=\"font-medium\">{data.percentage}%</span>\n          </div>\n        </div>\n      );\n    }\n    return null;\n  };\n\n  // Custom Y-axis tick with white text\n  const renderCustomYAxisTick = (props) => {\n    const { x, y, payload } = props;\n    return (\n      <text x={x} y={y} dy={3} textAnchor=\"end\" fill=\"#ffffff\" fontSize={10}>\n        {payload.value}\n      </text>\n    );\n  };\n\n  // --- Event Handlers ---\n  const handlePieEnter = (_, index) => setActiveIndex(index);\n  const handlePieLeave = () => setActiveIndex(null);\n  const handleBarEnter = (data, index) => setHoveredBar(index);\n  const handleBarLeave = () => setHoveredBar(null);\n\n  // --- Custom Legend Components ---\n  const renderLegend = (props) => {\n    const { payload } = props;\n    return (\n      <div className=\"flex flex-wrap justify-center gap-x-4 gap-y-2 text-xs mt-4\">\n        {payload.map((entry, index) => (\n          <div\n            key={`legend-${index}`}\n            className=\"flex items-center gap-1.5 transition-opacity duration-200 cursor-default\"\n            style={{ opacity: activeIndex === null || activeIndex === index ? 1 : 0.6 }}\n            onMouseEnter={() => handlePieEnter(null, index)}\n            onMouseLeave={handlePieLeave}\n          >\n            <div style={{ backgroundColor: entry.color }} className=\"w-3 h-3 rounded-full flex-shrink-0\" />\n            <span className=\"text-foreground\">{truncateText(entry.value, 20)}</span>\n          </div>\n        ))}\n      </div>\n    );\n  };\n\n  const renderBarLegend = (props) => {\n    const { payload, campaignInfo } = props;\n    if (!payload || payload.length === 0 || !campaignInfo) return null;\n\n    return (\n      <div className=\"flex flex-wrap justify-center gap-x-4 gap-y-2 text-xs mt-4\">\n        {payload.map((entry, index) => (\n          <div\n            key={`legend-bar-${index}`}\n            className=\"flex items-center gap-1.5 transition-opacity duration-200 cursor-default\"\n            style={{ opacity: hoveredBar === null || hoveredBar === index ? 1 : 0.6 }}\n            onMouseEnter={() => handleBarEnter(null, index)}\n            onMouseLeave={handleBarLeave}\n          >\n            {/* Conditionally render image for candidates */}\n            {campaignInfo.votingType === 0 && entry.imageHash && entry.imageHash !== 'no-image' ? (\n              <Image\n                src={resolveIpfsUrl(entry.imageHash) || \"/placeholder.svg\"}\n                width={16}\n                height={16}\n                alt={entry.name}\n                className=\"w-4 h-4 rounded-full object-cover mr-0.5 flex-shrink-0\"\n                unoptimized\n              />\n            ) : (\n              <div style={{ backgroundColor: entry.color }} className=\"w-3 h-3 rounded-sm flex-shrink-0\" />\n            )}\n            <span className=\"text-foreground\">{truncateText(entry.name, 25)}</span>\n            <span className=\"text-xs font-medium text-muted-foreground ml-1\">({entry.percentage}%)</span>\n          </div>\n        ))}\n      </div>\n    );\n  };\n  // ---------------------------------------\n\n  // --- Loading State ---\n  if (!campaignInfo) {\n    return (\n      <div className=\"py-12 text-center text-muted-foreground\">\n        <div className=\"animate-spin h-12 w-12 mx-auto mb-4 border-4 border-primary border-t-transparent rounded-full\"></div>\n        <p>Loading campaign information...</p>\n      </div>\n    );\n  }\n\n  // --- No Votes State ---\n  if ((campaignInfo.totalVotes ?? 0) === 0) {\n    return (\n      <Card className=\"rounded-xl shadow-sm\">\n        <CardHeader>\n          <CardTitle>Results</CardTitle>\n          <CardDescription>Status of the vote count.</CardDescription>\n        </CardHeader>\n        <CardContent className=\"p-8 text-center\">\n          <AlertCircle className=\"h-16 w-16 mx-auto mb-4 text-muted-foreground/50\" />\n          <h3 className=\"text-xl font-medium mb-2\">No Votes Yet</h3>\n          <p className=\"text-muted-foreground\">Results will appear here once votes are cast.</p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  // Determine items for detailed list\n  const items = campaignInfo.votingType === 1 ? sortedProposals : sortedCandidates;\n\n  return (\n    <div className=\"space-y-10\">\n\n      {/* Conditional \"Live Results\" Alert */}\n      {isDuringVoting && (\n        <Alert className=\"border-blue-200 bg-blue-50 text-blue-800 dark:border-blue-900 dark:bg-blue-950/30 dark:text-blue-300\">\n          <Clock className=\"h-4 w-4 !text-blue-500\" />\n          <AlertTitle className=\"font-semibold\">Live Results</AlertTitle>\n          <AlertDescription>\n            These results update periodically and may change. Final results are determined after the campaign ends.\n          </AlertDescription>\n        </Alert>\n      )}\n\n      {/* Header & Summary Section */}\n      <Card className=\"rounded-xl shadow-md overflow-hidden\">\n        <CardHeader className=\"p-6 border-b border-border\">\n          <div className=\"flex items-center gap-2 mb-1\">\n            {campaignInfo.resultType === 0 ? (\n              <><List className=\"h-5 w-5 text-primary\" /><h2 className=\"text-xl font-semibold\">Rank-Based Results</h2></>\n            ) : (\n              <><Trophy className=\"h-5 w-5 text-amber-500\" /><h2 className=\"text-xl font-semibold\">Winner-Based Results</h2></>\n            )}\n          </div>\n          <CardDescription>\n            {campaignInfo.resultType === 0\n              ? \"Showing all options ranked by number of votes received.\"\n              : \"Highlighting the winning option(s) based on total votes.\"}\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"p-6\">\n          {/* Winner/Tie info */}\n          {campaignInfo.resultType === 1 && (\n            <div className=\"mb-6\">\n              {winnerStatus.hasWinner ? (\n                winnerStatus.hasTie ? (\n                  <Alert variant=\"warning\" className=\"border-amber-300 dark:border-amber-700 bg-amber-50 dark:bg-amber-900/20 text-amber-900 dark:text-amber-200\">\n                    <Trophy className=\"h-4 w-4\" />\n                    <AlertTitle>Tie Detected!</AlertTitle>\n                    <AlertDescription className=\"text-amber-800 dark:text-amber-300\">\n                      Tie between {winnerStatus.tiedWinners.length} options ({winnerStatus.tiedWinners[0]?.voteCount ?? 0} votes each).\n                      <ul className=\"list-disc pl-5 mt-2 text-xs\">\n                        {winnerStatus.tiedWinners.slice(0, 3).map((item, idx) => (\n                          <li key={`tied-${item.id || idx}`}>{item.name || truncateText(item.content, 40)}</li>\n                        ))}\n                        {winnerStatus.tiedWinners.length > 3 && <li>... and more</li>}\n                      </ul>\n                    </AlertDescription>\n                  </Alert>\n                ) : (\n                  <Alert className=\"border-green-300 dark:border-green-700 bg-green-50 dark:bg-green-900/30 text-green-900 dark:text-green-200\">\n                    <Trophy className=\"h-4 w-4\" />\n                    <AlertTitle>{isDuringVoting ? \"Currently Leading!\" : \"Winner Declared!\"}</AlertTitle>\n                    <AlertDescription className=\"text-green-800 dark:text-green-300\">\n                      {campaignInfo.votingType === 1 ? `\"${truncateText(sortedProposals[0].content, 60)}\"` : `\"${sortedCandidates[0].name}\"`}{\" \"}\n                      {isDuringVoting ? \"is currently leading\" : \"won\"} with {sortedProposals[0]?.voteCount ?? sortedCandidates[0]?.voteCount ?? 0} votes.\n                    </AlertDescription>\n                  </Alert>\n                )\n              ) : (\n                 <Alert className=\"border-border bg-muted/50\">\n                   <AlertCircle className=\"h-4 w-4\" />\n                   <AlertTitle>Results Pending</AlertTitle>\n                   <AlertDescription>No clear winner yet based on current votes.</AlertDescription>\n                 </Alert>\n              )}\n            </div>\n          )}\n           {/* Summary Stats */}\n           <div className=\"grid grid-cols-2 gap-6 text-center\">\n              <div className=\"p-4 bg-muted/50 rounded-lg border\">\n                <p className=\"text-xs text-muted-foreground uppercase tracking-wider\">Total Votes</p>\n                <p className=\"text-2xl font-semibold mt-1\">{campaignInfo.totalVotes ?? 0}</p>\n              </div>\n              {/* Show Registered only if applicable */}\n              {campaignInfo.restriction !== 0 && (\n                <div className=\"p-4 bg-muted/50 rounded-lg border\">\n                  <p className=\"text-xs text-muted-foreground uppercase tracking-wider\">Registered</p>\n                  <p className=\"text-2xl font-semibold mt-1\">{campaignInfo.registeredVoterCount ?? 0}</p>\n                </div>\n              )}\n              {/* Optional: Participation Rate (only if registered count > 0) */}\n              {campaignInfo.restriction !== 0 && (campaignInfo.registeredVoterCount ?? 0) > 0 && (\n                 <div className=\"p-4 bg-muted/50 rounded-lg border col-span-2 sm:col-span-1\">\n                     <p className=\"text-xs text-muted-foreground uppercase tracking-wider\">Participation Rate</p>\n                     <p className=\"text-2xl font-semibold mt-1\">\n                       {Math.round(((campaignInfo.totalVotes ?? 0) / (campaignInfo.registeredVoterCount || 1)) * 100)}%\n                     </p>\n                 </div>\n              )}\n            </div>\n        </CardContent>\n      </Card>\n\n\n      {/* Detailed Results Section */}\n      <Card className=\"rounded-xl shadow-md overflow-hidden\">\n        <CardHeader className=\"p-6 border-b border-border\">\n          <h3 className=\"text-lg font-semibold\">Detailed Breakdown</h3>\n          <CardDescription>All options ranked by number of votes</CardDescription>\n        </CardHeader>\n        <CardContent className=\"p-6\">\n          {/* Scrollable list */}\n          <div className=\"space-y-4 max-h-[450px] overflow-y-auto pr-2 -mr-2 custom-scrollbar\">\n             {items.length > 0 ? items.map((item, index) => {\n              // Generate truly unique keys\n              const uniqueKey = campaignInfo.votingType === 1\n                ? `proposal-${item.id || index}-${item.content?.substring(0, 10)}`\n                : `candidate-${item.id || index}-${item.name?.substring(0, 10)}`;\n              const itemColor = CHART_COLORS[index % CHART_COLORS.length];\n              const votes = item.voteCount ?? 0;\n              const percentage = campaignInfo.totalVotes > 0 ? (votes / campaignInfo.totalVotes * 100) : 0;\n              const isCandidateType = campaignInfo.votingType === 0;\n\n              return (\n                <div key={uniqueKey} className=\"p-5 bg-muted/30 rounded-lg border border-border/50 hover:bg-muted/50 transition-colors\">\n                  <div className=\"flex justify-between items-start gap-4 mb-3\">\n                    <div className=\"flex items-center gap-3 flex-grow min-w-0\">\n                      <Badge variant=\"secondary\" className=\"flex-shrink-0 font-bold text-xs\" style={{ backgroundColor: `${itemColor}20`, color: itemColor, borderColor: `${itemColor}40` }}>{index + 1}</Badge>\n                      \n                      {/* Show Trophy Icon for Winner/Leader */}\n                      {campaignInfo.resultType === 1 && index === 0 && winnerStatus.hasWinner && !winnerStatus.hasTie && votes > 0 && (\n                        <Trophy className=\"h-5 w-5 text-amber-500 flex-shrink-0\" />\n                      )}\n                      \n                      {/* Show Candidate Image if Available */}\n                      {/* {isCandidateType && item.imageHash && item.imageHash !== 'no-image' && (\n                        <Image\n                          src={resolveIpfsUrl(item.imageHash) || \"/placeholder.svg\"}\n                          width={32}\n                          height={32}\n                          alt={item.name || `Candidate ${index + 1}`}\n                          className=\"w-8 h-8 rounded-full object-cover flex-shrink-0 border border-border\"\n                          unoptimized\n                        />\n                      )} */}\n                      \n                      <h4 className=\"font-medium text-sm text-foreground break-words flex-grow\">{campaignInfo.votingType === 1 ? item.content : item.name}</h4>\n                    </div>\n                    <Badge variant=\"outline\" className=\"flex-shrink-0 whitespace-nowrap text-xs\">{votes} votes</Badge>\n                  </div>\n                  {campaignInfo.votingType === 0 && item.address && (<p className=\"text-xs text-muted-foreground font-mono mb-3 ml-10\">{formatAddress(item.address)}</p>)}\n                  <div className=\"pl-10\">\n                    <div className=\"w-full h-2.5 bg-muted rounded-full overflow-hidden mb-1.5\">\n                      <div className=\"h-full rounded-full transition-all duration-500\" style={{ width: `${percentage}%`, backgroundColor: itemColor }}></div>\n                    </div>\n                    <p className=\"text-xs text-right text-muted-foreground\">{percentage.toFixed(1)}%</p>\n                  </div>\n                </div>\n              );\n            }) : (\n                <p className=\"text-center text-muted-foreground py-4\">No results data available.</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n\n      {/* Visualizations Section */}\n      <Card className=\"rounded-xl shadow-md overflow-hidden\">\n        <CardHeader className=\"p-6 border-b border-border\">\n          <h3 className=\"text-lg font-semibold\">Visualizations</h3>\n          <CardDescription>Graphical representation of results</CardDescription>\n        </CardHeader>\n        <CardContent className=\"p-6\">\n          {/* Changed to column layout for charts */}\n          <div className=\"grid grid-cols-1 gap-6\">\n\n            {/* Bar Chart */}\n            <div className=\"bg-muted/30 p-4 rounded-lg border border-border/50\">\n              <h4 className=\"font-medium mb-4 text-center text-sm\">Vote Distribution</h4>\n              <div className=\"h-[260px]\">\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <BarChart \n                    data={chartData} \n                    margin={{ top: 5, right: 5, left: -15, bottom: 5 }} \n                    barCategoryGap=\"25%\" \n                    onMouseMove={(state) => { if (state.isTooltipActive) setHoveredBar(state.activeTooltipIndex); }} \n                    onMouseLeave={() => setHoveredBar(null)}\n                  >\n                    <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"hsl(var(--border))\" strokeOpacity={0.6} />\n                    <XAxis dataKey=\"name\" hide />\n                    {/* Custom Y-axis with white text */}\n                    <YAxis \n                      fontSize={10} \n                      axisLine={false} \n                      tickLine={false} \n                      width={35} \n                      tick={renderCustomYAxisTick} \n                    />\n                    <RechartsTooltip \n                      content={<CustomBarTooltip />} \n                      cursor={{ fill: 'hsl(var(--muted))', fillOpacity: 0.5 }} \n                      wrapperStyle={{ zIndex: 10 }}\n                    />\n                    <Bar \n                      dataKey=\"votes\" \n                      radius={[4, 4, 0, 0]} \n                      animationDuration={800} \n                      isAnimationActive={true}\n                    >\n                      {chartData.map((entry, index) => (\n                        <Cell \n                          key={`bar-cell-${index}`} \n                          fill={entry.color} \n                          className=\"transition-opacity duration-200\" \n                          fillOpacity={hoveredBar === null || hoveredBar === index ? 1 : 0.6} \n                        />\n                      ))}\n                    </Bar>\n                  </BarChart>\n                </ResponsiveContainer>\n              </div>\n              {renderBarLegend({ payload: chartData, campaignInfo })}\n            </div>\n\n            {/* Pie Chart */}\n            <div className=\"bg-muted/30 p-4 rounded-lg border border-border/50\">\n              <h4 className=\"font-medium mb-4 text-center text-sm\">Percentage Breakdown</h4>\n              <div className=\"h-[260px]\">\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <PieChart>\n                    <Pie data={chartData} cx=\"50%\" cy=\"50%\" innerRadius=\"60%\" outerRadius=\"90%\" paddingAngle={chartData.length > 1 ? 2 : 0} dataKey=\"votes\" nameKey=\"name\" onMouseEnter={handlePieEnter} onMouseLeave={handlePieLeave} animationDuration={1000} isAnimationActive={true}>\n                      {chartData.map((entry, index) => (\n                        <Cell \n                          key={`pie-cell-${index}`} \n                          fill={entry.color} \n                          stroke={'var(--card)'} \n                          strokeWidth={1} \n                          className=\"cursor-pointer transition-opacity duration-200 outline-none focus:outline-none\" \n                          opacity={activeIndex === null || activeIndex === index ? 1 : 0.7} \n                        />\n                      ))}\n                    </Pie>\n                    <RechartsTooltip content={<CustomPieTooltip />} wrapperStyle={{ zIndex: 10 }}/>\n                  </PieChart>\n                </ResponsiveContainer>\n              </div>\n              <div className=\"mt-4\">\n                {renderLegend({ payload: chartData.map((entry) => ({ value: entry.name, color: entry.color })) })}\n              </div>\n            </div>\n\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport default ResultsTab;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2603, "column": 0}, "map": {"version":3,"sources":["file:///mnt/windows_d/manov/code/polytix-v1/components/ui/progress.jsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Progress({\n  className,\n  value,\n  ...props\n}) {\n  return (\n    (<ProgressPrimitive.Root\n      data-slot=\"progress\"\n      className={cn(\n        \"bg-primary/20 relative h-2 w-full overflow-hidden rounded-full\",\n        className\n      )}\n      {...props}>\n      <ProgressPrimitive.Indicator\n        data-slot=\"progress-indicator\"\n        className=\"bg-primary h-full w-full flex-1 transition-all\"\n        style={{ transform: `translateX(-${100 - (value || 0)}%)` }} />\n    </ProgressPrimitive.Root>)\n  );\n}\n\nexport { Progress }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,SAAS,SAAS,EAChB,SAAS,EACT,KAAK,EACL,GAAG,OACJ;IACC,qBACG,6LAAC,uKAAA,CAAA,OAAsB;QACtB,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,kEACA;QAED,GAAG,KAAK;kBACT,cAAA,6LAAC,uKAAA,CAAA,YAA2B;YAC1B,aAAU;YACV,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAGlE;KAnBS","debugId":null}},
    {"offset": {"line": 2659, "column": 0}, "map": {"version":3,"sources":["file:///mnt/windows_d/manov/code/polytix-v1/app/campaigns/%5Bid%5D/overview-tab.jsx"],"sourcesContent":["\"use client\"\n\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport { formatAddress, formatDate, resolveIpfsUrl, cn } from \"@/lib/utils\" // Added cn\nimport { CalendarClock, Clock, Users, FileText } from \"lucide-react\" // Added FileText for proposals\nimport Image from \"next/image\"\nimport { useContract } from \"@/context/contract-context\"\nimport { useState, useEffect } from \"react\"\n\n// Placeholder image URL using the provided IPFS hash\nconst DUMMY_PLACEHOLDER_IMAGE = \"https://gateway.pinata.cloud/ipfs/bafkreibluy7juck62zxdgzy3tjviuczrvcsjyt2yc3lwmvuielbaczckpi\";\n\nexport default function OverviewTab({\n  campaignInfo,\n  proposals = [], // Default to empty array\n  candidates: initialCandidates = [], // Default to empty array\n  isOwner,\n  isCandidate, // If the current user is *registered* as a candidate\n  isRegisteredVoter, // If the current user is eligible based on registration rules\n  isBeforeStart,\n  isDuringVoting,\n  isAfterEnd,\n}) {\n  const { contract } = useContract()\n  const [candidates, setCandidates] = useState(initialCandidates)\n  // Combine loading states for simplicity if only fetching candidates here\n  const [isLoadingCandidates, setIsLoadingCandidates] = useState(campaignInfo?.votingType === 0)\n\n  useEffect(() => {\n    // Ensure proposals is always an array for safety\n    const safeProposals = Array.isArray(proposals) ? proposals : [];\n    // Set initial candidates state, ensuring it's an array\n    setCandidates(Array.isArray(initialCandidates) ? initialCandidates : []);\n\n    // Only fetch if it's a candidate campaign and contract exists\n    if (campaignInfo?.votingType === 0 && contract) {\n        async function fetchCandidateData() {\n            // Prevent fetching if candidates passed via props seem complete\n             const needsFetching = initialCandidates.some(c => c.statement === \"Loading details...\" || c.imageHash === \"loading\");\n            if (!needsFetching) {\n                console.log(\"OverviewTab: Skipping fetch, candidate data seems complete from props.\");\n                setIsLoadingCandidates(false);\n                return;\n            }\n\n            setIsLoadingCandidates(true);\n            console.log(\"OverviewTab: Fetching candidate data for campaign:\", campaignInfo.id);\n            try {\n                const candidateCount = await contract.getCandidateIds(campaignInfo.id);\n                const fetchedCandidates = [];\n                for (let i = 0; i < candidateCount; i++) {\n                    try {\n                        const candidateInfo = await contract.getCandidateInfo(campaignInfo.id, i);\n                        const voteCountResult = await contract.getCandidateInfo(campaignInfo.id, i); // Assuming this returns vote count\n\n                        fetchedCandidates.push({\n                            id: i,\n                            address: candidateInfo[0],\n                            name: candidateInfo[1],\n                            statement: candidateInfo[2] || \"No statement provided.\",\n                            imageHash: candidateInfo[3] || \"no-image\",\n                            voteCount: Number(voteCountResult[4] ?? 0) // Get vote count from the second call or fallback\n                        });\n                    } catch (candidateErr) {\n                        console.error(`OverviewTab: Error fetching candidate ${i}:`, candidateErr);\n                        // Keep initial data if fetch fails for one\n                        const existing = initialCandidates.find(c => c.id === i);\n                        if (existing) fetchedCandidates.push({ ...existing, statement: \"Error loading details\", imageHash: \"no-image\" });\n                    }\n                }\n                setCandidates(fetchedCandidates);\n            } catch (err) {\n                console.error(\"OverviewTab: Error fetching candidate count:\", err);\n                // Fallback to initial candidates if count fetch fails\n                setCandidates(initialCandidates.map(c => ({...c, statement: \"Error loading data\", imageHash: \"no-image\" })));\n            } finally {\n                setIsLoadingCandidates(false);\n            }\n        }\n        fetchCandidateData();\n    } else {\n         // If not candidate-based or no contract, stop loading\n         setIsLoadingCandidates(false);\n    }\n  }, [contract, campaignInfo, initialCandidates]); // Depend on initialCandidates too\n\n  // Ensure campaignInfo exists before rendering details\n  if (!campaignInfo) {\n    return <Skeleton className=\"h-48 w-full\" />; // Or a more specific loading state\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Campaign Details Card */}\n     \n      {/* Candidates Section */}\n      {campaignInfo.votingType === 0 && (\n        <Card className=\"rounded-xl shadow-sm overflow-hidden\">\n          <CardHeader>\n            <CardTitle className=\"text-lg\">Candidates</CardTitle>\n            <CardDescription>\n              {isLoadingCandidates\n                ? \"Loading candidate details...\"\n                : `${candidates.length} candidate${candidates.length !== 1 ? 's' : ''} participating`}\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {isLoadingCandidates ? (\n                // Skeletons with circular image placeholder\n                Array(Math.max(2, candidates.length)) // Show at least 2 skeletons\n                  .fill(0).map((_, idx) => (\n                    <div key={`skeleton-${idx}`} className=\"p-4 flex gap-4 border rounded-lg bg-muted/30\">\n                      <Skeleton className=\"w-14 h-14 rounded-full flex-shrink-0\" /> {/* Circular skeleton */}\n                      <div className=\"flex-1 space-y-2\">\n                        <Skeleton className=\"h-5 w-3/4\" />\n                        <Skeleton className=\"h-3 w-1/2\" />\n                        <Skeleton className=\"h-3 w-full\" />\n                        <Skeleton className=\"h-3 w-5/6\" />\n                      </div>\n                    </div>\n                  ))\n              ) : candidates.length > 0 ? (\n                candidates.map((candidate) => {\n                  const imageUrl = (candidate.imageHash && candidate.imageHash !== \"no-image\")\n                                   ? resolveIpfsUrl(candidate.imageHash)\n                                   : DUMMY_PLACEHOLDER_IMAGE; // Use dummy if invalid/missing\n                  return(\n                    <Card key={candidate.id} className=\"overflow-hidden bg-background/50 hover:shadow-md transition-shadow\">\n                       {/* Use Card here for structure */}\n                      <CardContent className=\"p-4 flex items-start gap-4\">\n                          {/* Circular Image Container */}\n                          <div className=\"w-16 h-16 rounded-full bg-muted flex items-center justify-center flex-shrink-0 overflow-hidden border\">\n                            <Image\n                              // Use resolved URL or placeholder\n                              src={imageUrl || \"/placeholder.svg\"} // Final fallback\n                              width={64}\n                              height={64}\n                              alt={candidate.name || 'Candidate'}\n                              className=\"w-full h-full object-cover\" // Ensure image covers the circle\n                              unoptimized // Good for IPFS\n                              // Optional: Add error handling for the image itself\n                              onError={(e) => { e.currentTarget.src = DUMMY_PLACEHOLDER_IMAGE; }}\n                            />\n                          </div>\n                          <div className=\"flex-1\">\n                            <h3 className=\"font-semibold text-base\">{candidate.name || `Candidate ${candidate.id}`}</h3>\n                            <p className=\"text-xs text-muted-foreground font-mono mb-2\">{formatAddress(candidate.address)}</p>\n                            <p className=\"text-sm text-muted-foreground line-clamp-3\">{candidate.statement || \"No statement provided.\"}</p>\n                          </div>\n                      </CardContent>\n                    </Card>\n                  )\n                })\n              ) : (\n                <p className=\"col-span-1 md:col-span-2 text-center p-8 text-muted-foreground\">\n                  No candidates have registered for this campaign yet.\n                </p>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Proposals Section */}\n      {campaignInfo.votingType === 1 && (\n        <Card className=\"rounded-xl shadow-sm overflow-hidden\">\n          <CardHeader>\n            <CardTitle className=\"text-lg\">Proposals</CardTitle>\n            <CardDescription>{proposals.length} proposal{proposals.length !== 1 ? 's' : ''} submitted</CardDescription>\n          </CardHeader>\n          <CardContent>\n             {/* Use a list for proposals */}\n            {proposals.length > 0 ? (\n              <ul className=\"space-y-3\">\n                {proposals.map((proposal, index) => (\n                  <li key={proposal.id || index} className=\"p-4 border rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors\">\n                     {/* Optionally add a small icon */}\n                     <div className=\"flex items-start gap-3\">\n                         <FileText className=\"h-4 w-4 mt-1 text-primary flex-shrink-0\"/>\n                         <p className=\"text-sm text-foreground flex-1\">{proposal.content}</p>\n                     </div>\n                  </li>\n                ))}\n              </ul>\n            ) : (\n              <p className=\"text-center p-8 text-muted-foreground\">\n                No proposals found for this campaign.\n              </p>\n            )}\n          </CardContent>\n        </Card>\n      )}\n\n    \n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3073, "column": 0}, "map": {"version":3,"sources":["file:///mnt/windows_d/manov/code/polytix-v1/components/ui/radio-group.jsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { CircleIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction RadioGroup({\n  className,\n  ...props\n}) {\n  return (\n    (<RadioGroupPrimitive.Root\n      data-slot=\"radio-group\"\n      className={cn(\"grid gap-3\", className)}\n      {...props} />)\n  );\n}\n\nfunction RadioGroupItem({\n  className,\n  ...props\n}) {\n  return (\n    (<RadioGroupPrimitive.Item\n      data-slot=\"radio-group-item\"\n      className={cn(\n        \"border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}>\n      <RadioGroupPrimitive.Indicator\n        data-slot=\"radio-group-indicator\"\n        className=\"relative flex items-center justify-center\">\n        <CircleIcon\n          className=\"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>)\n  );\n}\n\nexport { RadioGroup, RadioGroupItem }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC,6KAAA,CAAA,OAAwB;QACxB,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,cAAc;QAC3B,GAAG,KAAK;;;;;;AAEf;KAVS;AAYT,SAAS,eAAe,EACtB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC,6KAAA,CAAA,OAAwB;QACxB,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,0XACA;QAED,GAAG,KAAK;kBACT,cAAA,6LAAC,6KAAA,CAAA,YAA6B;YAC5B,aAAU;YACV,WAAU;sBACV,cAAA,6LAAC,6MAAA,CAAA,aAAU;gBACT,WAAU;;;;;;;;;;;;;;;;AAIpB;MApBS","debugId":null}},
    {"offset": {"line": 3140, "column": 0}, "map": {"version":3,"sources":["file:///mnt/windows_d/manov/code/polytix-v1/components/ui/dialog.jsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { XIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Dialog({\n  ...props\n}) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />;\n}\n\nfunction DialogTrigger({\n  ...props\n}) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />;\n}\n\nfunction DialogPortal({\n  ...props\n}) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />;\n}\n\nfunction DialogClose({\n  ...props\n}) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />;\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}) {\n  return (\n    (<DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className\n      )}\n      {...props} />)\n  );\n}\n\nfunction DialogContent({\n  className,\n  children,\n  ...props\n}) {\n  return (\n    (<DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\n          className\n        )}\n        {...props}>\n        {children}\n        <DialogPrimitive.Close\n          className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\">\n          <XIcon />\n          <span className=\"sr-only\">Close</span>\n        </DialogPrimitive.Close>\n      </DialogPrimitive.Content>\n    </DialogPortal>)\n  );\n}\n\nfunction DialogHeader({\n  className,\n  ...props\n}) {\n  return (\n    (<div\n      data-slot=\"dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props} />)\n  );\n}\n\nfunction DialogFooter({\n  className,\n  ...props\n}) {\n  return (\n    (<div\n      data-slot=\"dialog-footer\"\n      className={cn(\"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\", className)}\n      {...props} />)\n  );\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}) {\n  return (\n    (<DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn(\"text-lg leading-none font-semibold\", className)}\n      {...props} />)\n  );\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}) {\n  return (\n    (<DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props} />)\n  );\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OACJ;IACC,qBAAO,6LAAC,qKAAA,CAAA,OAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;KAJS;AAMT,SAAS,cAAc,EACrB,GAAG,OACJ;IACC,qBAAO,6LAAC,qKAAA,CAAA,UAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;MAJS;AAMT,SAAS,aAAa,EACpB,GAAG,OACJ;IACC,qBAAO,6LAAC,qKAAA,CAAA,SAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;MAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACJ;IACC,qBAAO,6LAAC,qKAAA,CAAA,QAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC,qKAAA,CAAA,UAAuB;QACvB,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,0JACA;QAED,GAAG,KAAK;;;;;;AAEf;MAbS;AAeT,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,GAAG,OACJ;IACC,qBACG,6LAAC;QAAa,aAAU;;0BACvB,6LAAC;;;;;0BACD,6LAAC,qKAAA,CAAA,UAAuB;gBACtB,aAAU;gBACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,+WACA;gBAED,GAAG,KAAK;;oBACR;kCACD,6LAAC,qKAAA,CAAA,QAAqB;wBACpB,WAAU;;0CACV,6LAAC,mMAAA,CAAA,QAAK;;;;;0CACN,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKpC;MAxBS;AA0BT,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAEf;MAVS;AAYT,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,0DAA0D;QACvE,GAAG,KAAK;;;;;;AAEf;MAVS;AAYT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC,qKAAA,CAAA,QAAqB;QACrB,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAEf;MAVS;AAYT,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,6LAAC,qKAAA,CAAA,cAA2B;QAC3B,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAEf;MAVS","debugId":null}},
    {"offset": {"line": 3339, "column": 0}, "map": {"version":3,"sources":["file:///mnt/windows_d/manov/code/polytix-v1/app/campaigns/%5Bid%5D/vote-tab.jsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle, CardFooter } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\"\nimport { Label } from \"@/components/ui/label\"\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\"\nimport { AlertCircle, CheckCircle, Vote, AlertTriangle, Users } from \"lucide-react\"\nimport { formatAddress, resolveIpfsUrl } from \"@/lib/utils\"\nimport { toast } from \"sonner\"\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from \"@/components/ui/dialog\"\nimport Image from \"next/image\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport { X } from \"lucide-react\"\n\nexport default function VoteTab({\n  campaignInfo,\n  proposals,\n  candidates: initialCandidates,\n  contract,\n  campaignId,\n  isConnected,\n  connectWallet,\n  onVoteSuccess,\n}) {\n  const [selectedOption, setSelectedOption] = useState(null)\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [error, setError] = useState(null)\n  const [success, setSuccess] = useState(null)\n  const [showErrorDialog, setShowErrorDialog] = useState(false)\n  const [candidates, setCandidates] = useState(initialCandidates)\n  const [loading, setLoading] = useState(true)\n\n  // Loading state for candidates\n  const candidatesLoading = campaignInfo?.votingType === 0 && loading\n\n  useEffect(() => {\n    async function fetchCandidateData() {\n      if (!contract || campaignInfo?.votingType !== 0) {\n        setLoading(false)\n        return\n      }\n\n      try {\n        setLoading(true)\n        console.log(\"Fetching candidate data for campaign:\", campaignInfo.id)\n        \n        // Get the total number of candidates\n        const candidateCount = await contract.getCandidateIds(campaignInfo.id)\n        console.log(`Found ${candidateCount} candidates`)\n        \n        const fetchedCandidates = []\n        \n        // Fetch each candidate's details\n        for (let i = 0; i < candidateCount; i++) {\n          try {\n            // Get candidate data from contract\n            const candidateInfo = await contract.getCandidateInfo(campaignInfo.id, i)\n            console.log(`Candidate ${i} data:`, candidateInfo)\n            \n            // Extract candidate data\n            const candidateAddress = candidateInfo[0]\n            const candidateName = candidateInfo[1]\n            const candidateStatement = candidateInfo[2]\n            const candidateImageHash = candidateInfo[3] || \"no-image\"\n            \n            // Get vote count for this candidate\n            const voteCount = candidateInfo[4]\n            \n            fetchedCandidates.push({\n              id: i,\n              address: candidateAddress,\n              name: candidateName,\n              statement: candidateStatement,\n              imageHash: candidateImageHash,\n              voteCount: Number(voteCount)\n            })\n          } catch (candidateErr) {\n            console.error(`Error fetching candidate ${i}:`, candidateErr)\n          }\n        }\n        \n        setCandidates(fetchedCandidates)\n      } catch (err) {\n        console.error(\"Error fetching candidates:\", err)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchCandidateData()\n  }, [contract, campaignInfo])\n\n  const handleVote = async () => {\n    if (!isConnected) {\n      await connectWallet()\n      return\n    }\n\n    if (selectedOption === null) {\n      toast.error(\"Please select an option to vote for\")\n      setError(\"Please select an option to vote for\")\n      return\n    }\n\n    try {\n      setIsSubmitting(true)\n      setError(null)\n      setSuccess(null)\n\n      toast.loading(\"Casting your vote...\", {\n        id: \"vote-transaction\",\n      })\n\n      // Call contract to vote\n      let tx\n      if (campaignInfo.votingType === 0) {\n        // Candidate-based\n        tx = await contract.voteForCandidate(campaignId, selectedOption)\n      } else {\n        // Proposal-based\n        tx = await contract.voteForProposal(campaignId, selectedOption)\n      }\n\n      await tx.wait()\n\n      toast.success(\"Your vote has been cast successfully!\", {\n        id: \"vote-transaction\",\n        duration: 5000,\n      })\n\n      setSuccess(\"Your vote has been cast successfully!\")\n\n      // Notify parent component\n      if (onVoteSuccess) {\n        setTimeout(() => {\n          onVoteSuccess()\n        }, 2000)\n      }\n    } catch (err) {\n      console.error(\"Error voting:\", err)\n\n      toast.error(\"Failed to cast your vote\", {\n        id: \"vote-transaction\",\n        duration: 5000,\n      })\n\n      setError(\"Failed to cast your vote. Please try again.\")\n      setShowErrorDialog(true)\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  if (!isConnected) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Vote className=\"h-5 w-5 text-primary\" />\n            Connect Wallet to Vote\n          </CardTitle>\n          <CardDescription>You need to connect your wallet to vote in this campaign</CardDescription>\n        </CardHeader>\n        <CardContent className=\"text-center py-8\">\n          <Vote className=\"h-16 w-16 mx-auto text-muted-foreground/50 mb-4\" />\n          <p className=\"text-muted-foreground mb-6\">Connect your wallet to cast your vote in this campaign</p>\n          <Button onClick={connectWallet}>Connect Wallet</Button>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <>\n      <Card className=\"border-2 border-primary/10 shadow-lg\">\n        <CardHeader className=\"bg-primary/5\">\n          <CardTitle className=\"flex items-center gap-2\">\n            <Vote className=\"h-5 w-5 text-primary\" />\n            Cast Your Vote\n          </CardTitle>\n          <CardDescription>\n            {campaignInfo.votingType === 1 ? \"Select a proposal to vote for\" : \"Select a candidate to vote for\"}\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"pt-6\">\n          {error && (\n            <Alert variant=\"destructive\" className=\"mb-4\">\n              <AlertCircle className=\"h-4 w-4\" />\n              <AlertTitle>Error</AlertTitle>\n              <AlertDescription>{error}</AlertDescription>\n            </Alert>\n          )}\n\n          {success && (\n            <Alert className=\"bg-green-50 text-green-800 border-green-200 mb-4\">\n              <CheckCircle className=\"h-4 w-4 text-green-500\" />\n              <AlertTitle>Success</AlertTitle>\n              <AlertDescription>{success}</AlertDescription>\n            </Alert>\n          )}\n\n          <div className=\"bg-muted/20 p-4 rounded-lg mb-6\">\n            <h3 className=\"text-sm font-medium mb-2 flex items-center\">\n              <AlertCircle className=\"h-4 w-4 mr-2 text-amber-500\" />\n              Important Information\n            </h3>\n            <ul className=\"text-sm text-muted-foreground space-y-1 list-disc pl-5\">\n              <li>Your vote is final and cannot be changed once submitted</li>\n              <li>Voting requires a blockchain transaction that may take a few moments to complete</li>\n              <li>Make sure you have enough gas in your wallet to complete the transaction</li>\n            </ul>\n          </div>\n\n          <RadioGroup\n            value={selectedOption !== null ? selectedOption.toString() : undefined}\n            onValueChange={(value) => setSelectedOption(Number.parseInt(value))}\n            className=\"space-y-4\"\n          >\n            {campaignInfo.votingType === 1\n              ? proposals.map((proposal) => (\n                  <div\n                    key={proposal.id}\n                    className=\"flex items-start space-x-2 border rounded-md p-4 hover:bg-muted/50 transition-colors\"\n                  >\n                    <RadioGroupItem value={proposal.id.toString()} id={`proposal-${proposal.id}`} className=\"mt-1\" />\n                    <div className=\"flex-1\">\n                      <Label htmlFor={`proposal-${proposal.id}`} className=\"font-medium cursor-pointer\">\n                        Proposal {proposal.id + 1}\n                      </Label>\n                      <p className=\"text-sm text-muted-foreground mt-1\">{proposal.content}</p>\n                    </div>\n                  </div>\n                ))\n              : candidatesLoading ? (\n                  // Show skeletons while loading\n                  Array(3).fill(0).map((_, idx) => (\n                    <div\n                      key={`skeleton-${idx}`}\n                      className=\"flex items-start space-x-2 border rounded-md p-4\"\n                    >\n                      <Skeleton className=\"h-4 w-4 mt-1 rounded-full\" />\n                      <div className=\"flex-1\">\n                        <div className=\"flex gap-4\">\n                          <Skeleton className=\"w-12 h-12 rounded-md flex-shrink-0\" />\n                          <div className=\"flex-1\">\n                            <Skeleton className=\"h-5 w-1/3 mb-1\" />\n                            <Skeleton className=\"h-3 w-1/4 mb-2\" />\n                            <Skeleton className=\"h-3 w-full\" />\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))\n                )\n                : candidates.map((candidate) => (\n                  <div\n                    key={candidate.id}\n                    className=\"flex items-start space-x-2 border rounded-md p-4 hover:bg-muted/50 transition-colors\"\n                  >\n                    <RadioGroupItem value={candidate.id.toString()} id={`candidate-${candidate.id}`} className=\"mt-1\" />\n                    <div className=\"flex-1\">\n                      <div className=\"flex gap-4\">\n                        <div className=\"w-12 h-12 rounded-md bg-muted flex items-center justify-center flex-shrink-0\">\n                          {candidate.imageHash &&\n                          candidate.imageHash !== \"loading\" &&\n                          candidate.imageHash !== \"no-image\" ? (\n                            <Image\n                              src={resolveIpfsUrl(candidate.imageHash)}\n                              width={48}\n                              height={48}\n                              alt={candidate.name}\n                              className=\"rounded-md object-cover\"\n                            />\n                          ) : (\n                            <Users className=\"h-6 w-6 text-muted-foreground\" />\n                          )}\n                        </div>\n                        <div className=\"flex-1\">\n                          <Label htmlFor={`candidate-${candidate.id}`} className=\"font-medium cursor-pointer\">\n                            {candidate.name}\n                          </Label>\n                          <p className=\"text-xs text-muted-foreground\">{formatAddress(candidate.address)}</p>\n                          <p className=\"text-sm text-muted-foreground mt-1\">{candidate.statement}</p>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n          </RadioGroup>\n        </CardContent>\n        <CardFooter className=\"bg-muted/10 border-t px-6 py-4\">\n          <Button \n            className=\"w-full\" \n            onClick={handleVote} \n            disabled={selectedOption === null || isSubmitting || candidatesLoading} \n            size=\"lg\"\n          >\n            {isSubmitting ? \"Casting Vote...\" : candidatesLoading ? \"Loading Candidates...\" : \"Cast Vote\"}\n          </Button>\n        </CardFooter>\n      </Card>\n\n      <Dialog open={showErrorDialog} onOpenChange={setShowErrorDialog}>\n        {/* Increased max-width, standard padding */}\n        <DialogTitle></DialogTitle>\n        <DialogContent className=\"sm:max-w-2xl p-6\">\n          {/* Optional Close Button Top Right */}\n          <button\n            onClick={() => setShowErrorDialog(false)}\n            className=\"absolute top-4 right-4 p-1.5 rounded-full text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors z-10\" // Ensure button is above content\n            aria-label=\"Close dialog\"\n          >\n            <X size={18} />\n          </button>\n\n          {/* Main Content Area */}\n          <div>\n             {/* Header Section: Icon + Title */}\n            <div className=\"flex items-center gap-3 mb-3\">\n              <AlertTriangle className=\"h-8 w-8 text-amber-500 flex-shrink-0\" />\n              <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\n                Vote Transaction Failed\n              </h3>\n            </div>\n\n            {/* Primary Description */}\n            <p className=\"text-sm text-muted-foreground mb-5\">\n              We encountered an issue while trying to submit your vote. This could be due to network congestion or recent platform updates (migration to Polygon Amoy).\n            </p>\n\n            {/* Context Box (Subtle Styling) */}\n            <div className=\"p-4 bg-amber-50 dark:bg-amber-950/30 rounded-lg border border-amber-200 dark:border-amber-800/50 mb-6\">\n               {/* Removed explicit title, incorporated into description above */}\n               <p className=\"text-sm font-medium text-amber-800 dark:text-amber-200 mb-2\">\n                  Troubleshooting Suggestions:\n               </p>\n               <ul className=\"list-disc pl-5 space-y-1.5 text-sm text-amber-700 dark:text-amber-400\">\n                 <li>Consider slightly increasing the transaction's gas fee within your wallet settings.</li>\n                 <li>Wait a few moments and then click \"Try Again\".</li>\n                 <li>Double-check that your wallet is connected and set to the correct network (Polygon Amoy).</li>\n               </ul>\n            </div>\n\n            {/* Action Buttons */}\n            <div className=\"flex justify-end gap-3 pt-5 mt-6 border-t border-gray-200 dark:border-gray-700\">\n               <Button variant=\"outline\" onClick={() => setShowErrorDialog(false)}>\n                  Close\n               </Button>\n               <Button\n                 onClick={() => {\n                   setShowErrorDialog(false);\n                   handleVote(); // Re-trigger the vote attempt\n                 }}\n               >\n                  Try Again\n               </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n    </>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4140, "column": 0}, "map": {"version":3,"sources":["file:///mnt/windows_d/manov/code/polytix-v1/hooks/use-voter-status.jsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useCallback } from \"react\"\nimport { useContract } from \"@/context/contract-context\"\n\n// Define enum values locally to match the ACTUAL CONTRACT returns\nconst VotingRestriction = {\n  OpenToAll: 0,\n  Limited: 1,\n  RequiredRegistration: 2,\n}\n\n// **** CORRECTED ENUM VALUES TO MATCH CONTRACT ****\nconst RegistrationType = {\n  Voter: 0,     // Matches contract return for Voter\n  Candidate: 1, // Matches contract return for Candidate\n  // We don't need a 'None' here because the contract reverts if not registered.\n}\n\nexport function useVoterStatus(campaignId) {\n  const { contract, address, isConnected } = useContract()\n  const [isLoading, setIsLoading] = useState(true)\n  const [isRegisteredVoter, setIsRegisteredVoter] = useState(false) // Eligible based on registration rules\n  const [isRegisteredCandidate, setIsRegisteredCandidate] = useState(false) // Specifically a candidate\n  const [hasVoted, setHasVoted] = useState(false)\n  const [error, setError] = useState(null)\n\n  const checkVoterStatus = useCallback(async () => {\n    setIsLoading(true)\n    setError(null)\n\n    if (!contract || !isConnected || !address || !campaignId) {\n      console.log(\"VoterStatus Hook: Prerequisites not met.\");\n      setIsLoading(false);\n      return { isRegisteredVoter: false, isRegisteredCandidate: false, hasVoted: false, error: \"Prerequisites not met\", isLoading: false };\n    }\n\n    console.log(`VoterStatus Hook: Checking status for campaign ${campaignId} and address ${address}`);\n    let status = {\n        isRegisteredVoter: false,\n        isRegisteredCandidate: false,\n        hasVoted: false,\n        error: null,\n        isLoading: true,\n    };\n\n    try {\n      const campaignInfo = await contract.getCampaignBasicInfo(campaignId)\n      const restrictionType = Number(campaignInfo[1])\n\n      let userRegType; // Will hold 0 or 1 if registered, otherwise undefined\n      let isEligibleBasedOnRegistration = false; // Default to false\n\n      if (restrictionType === VotingRestriction.RequiredRegistration) {\n        try {\n          const rawRegType = await contract.getUserRegistrationType(campaignId, address);\n          userRegType = Number(rawRegType); // Convert uint8/BigInt to number\n\n          console.log(\" ---------------------- >USER REGISTRATION TYPE RAW\", rawRegType);\n          console.log(\" ---------------------- >USER REGISTRATION TYPE NUMBER\", userRegType);\n\n          // Check if the user is registered as EITHER Voter (0) or Candidate (1)\n          if (userRegType === RegistrationType.Voter || userRegType === RegistrationType.Candidate) {\n             isEligibleBasedOnRegistration = true;\n          } else {\n              // Should not happen if contract returns only 0 or 1, but safety check\n              console.warn(`VoterStatus Hook: Unexpected registration type value: ${userRegType}`);\n              isEligibleBasedOnRegistration = false;\n          }\n\n        } catch (regError) {\n          // This catch block specifically handles the \"User not registered\" revert\n          if (regError.message?.includes(\"User not registered\") || regError.reason?.includes(\"User not registered\") || regError.error?.message?.includes(\"User not registered\") ) {\n            console.log(`VoterStatus Hook: User is not registered for required campaign ${campaignId}.`);\n            // userRegType remains undefined\n            isEligibleBasedOnRegistration = false;\n          } else {\n            // Re-throw other unexpected errors\n            console.error(`VoterStatus Hook: Unexpected error checking registration type:`, regError);\n            throw new Error(\"Failed to check registration status.\");\n          }\n        }\n      } else {\n        // If registration is not required, user is eligible by default\n        isEligibleBasedOnRegistration = true;\n      }\n\n      // Check voting status (only if eligible based on registration)\n      // Although contract might allow checking even if not registered, it's logical to check only if eligible.\n      let voted = false;\n      if(isEligibleBasedOnRegistration || restrictionType !== VotingRestriction.RequiredRegistration){ // Check vote status if eligible OR if registration wasn't required\n          voted = await contract.hasUserVoted(campaignId, address);\n      }\n\n\n      // Update the temporary status object\n      // isRegisteredVoter now correctly reflects eligibility based on registration rules\n      status.isRegisteredVoter = isEligibleBasedOnRegistration;\n      // Check if specifically a candidate (value 1)\n      status.isRegisteredCandidate = (userRegType === RegistrationType.Candidate);\n      status.hasVoted = voted;\n\n      // Update hook's internal state\n      setIsRegisteredVoter(status.isRegisteredVoter)\n      setIsRegisteredCandidate(status.isRegisteredCandidate)\n      setHasVoted(status.hasVoted)\n      setError(null)\n\n      console.log(`VoterStatus Hook: Final status set for campaign ${campaignId}:`, status);\n\n    } catch (err) {\n      console.error(`VoterStatus Hook: Error checking voter status for campaign ${campaignId}:`, err)\n      const errorMsg = err.message || \"Failed to fetch voter status from blockchain\";\n      setError(errorMsg);\n      status.error = errorMsg;\n      // Reset states on error\n      setIsRegisteredVoter(false)\n      setIsRegisteredCandidate(false)\n      setHasVoted(false)\n    } finally {\n      setIsLoading(false)\n      status.isLoading = false;\n      console.log(`VoterStatus Hook: Finished status check for campaign ${campaignId}. Loading: false.`);\n      return status;\n    }\n  }, [contract, address, isConnected, campaignId])\n\n  useEffect(() => {\n    checkVoterStatus()\n  }, [checkVoterStatus])\n\n  return {\n    isLoading,\n    isRegisteredVoter,\n    isRegisteredCandidate,\n    hasVoted,\n    error,\n    refetch: checkVoterStatus,\n  }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4298, "column": 0}, "map": {"version":3,"sources":["file:///mnt/windows_d/manov/code/polytix-v1/app/campaigns/%5Bid%5D/mandatory-wallet-connect.jsx"],"sourcesContent":["import React from 'react';\nimport { Wallet, ArrowLeft } from 'lucide-react';\nimport { Button } from '@/components/ui/button'; // Assuming you use Shadcn UI Button\n\nconst MandatoryWalletConnectDialog = ({ onConnectWallet, onGoBack }) => {\n  return (\n    <div\n      className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm animate-in fade-in duration-300\"\n      aria-modal=\"true\"\n      role=\"dialog\"\n      aria-labelledby=\"mandatory-connect-title\"\n    >\n      <div\n        className=\"bg-white dark:bg-gray-800 p-7 rounded-xl shadow-2xl max-w-md w-full mx-4\n                   transform transition-all duration-300 animate-in slide-in-from-bottom-4 fade-in zoom-in-95\"\n        // Prevent clicks inside from propagating (though backdrop click isn't handled here)\n        onClick={(e) => e.stopPropagation()}\n      >\n        <div className=\"flex flex-col items-center text-center\">\n          <Wallet className=\"h-12 w-12 text-blue-500 mb-4\" />\n          <h3\n            id=\"mandatory-connect-title\"\n            className=\"text-xl font-semibold text-gray-900 dark:text-white mb-3\"\n          >\n            Connect Wallet to Participate\n          </h3>\n\n          <p className=\"text-gray-600 dark:text-gray-300 mb-6 text-sm\">\n            To view campaign details, check your eligibility, register, vote, or view results, you need to connect your Web3 wallet first.\n          </p>\n\n          {/* Action Buttons */}\n          <div className=\"grid gap-3 w-full\">\n            <Button\n              onClick={onConnectWallet}\n              className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold\"\n              size=\"lg\" // Make the primary action prominent\n            >\n              <Wallet size={18} className=\"mr-2\" />\n              Connect Wallet\n            </Button>\n\n            <Button\n              onClick={onGoBack}\n              variant=\"outline\"\n              className=\"w-full\"\n            >\n               <ArrowLeft size={16} className=\"mr-2\" />\n              Back to Campaigns\n            </Button>\n          </div>\n\n           <p className=\"text-xs text-gray-400 dark:text-gray-500 mt-5\">\n            Connecting allows the platform to interact with the blockchain on your behalf (with your approval).\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MandatoryWalletConnectDialog;"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AACA,8NAAiD,oCAAoC;;;;;AAErF,MAAM,+BAA+B,CAAC,EAAE,eAAe,EAAE,QAAQ,EAAE;IACjE,qBACE,6LAAC;QACC,WAAU;QACV,cAAW;QACX,MAAK;QACL,mBAAgB;kBAEhB,cAAA,6LAAC;YACC,WAAU;YAEV,oFAAoF;YACpF,SAAS,CAAC,IAAM,EAAE,eAAe;sBAEjC,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,yMAAA,CAAA,SAAM;wBAAC,WAAU;;;;;;kCAClB,6LAAC;wBACC,IAAG;wBACH,WAAU;kCACX;;;;;;kCAID,6LAAC;wBAAE,WAAU;kCAAgD;;;;;;kCAK7D,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,8HAAA,CAAA,SAAM;gCACL,SAAS;gCACT,WAAU;gCACV,MAAK,KAAK,oCAAoC;;;kDAE9C,6LAAC,yMAAA,CAAA,SAAM;wCAAC,MAAM;wCAAI,WAAU;;;;;;oCAAS;;;;;;;0CAIvC,6LAAC,8HAAA,CAAA,SAAM;gCACL,SAAS;gCACT,SAAQ;gCACR,WAAU;;kDAET,6LAAC,mNAAA,CAAA,YAAS;wCAAC,MAAM;wCAAI,WAAU;;;;;;oCAAS;;;;;;;;;;;;;kCAK5C,6LAAC;wBAAE,WAAU;kCAAgD;;;;;;;;;;;;;;;;;;;;;;AAOxE;KAvDM;uCAyDS","debugId":null}},
    {"offset": {"line": 4435, "column": 0}, "map": {"version":3,"sources":["file:///mnt/windows_d/manov/code/polytix-v1/app/campaigns/%5Bid%5D/page.jsx"],"sourcesContent":["\"use client\"\n\nimport { Check, Vote } from \"lucide-react\"\nimport { useParams, useRouter } from \"next/navigation\"\nimport { useEffect, useState, useMemo } from \"react\"\nimport Link from \"next/link\"\nimport { useContract } from \"@/context/contract-context\"\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from \"@/components/ui/tabs\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\"\nimport { ArrowLeft, CalendarClock, Clock, Users, AlertCircle, RefreshCw, Award } from \"lucide-react\"\nimport { formatDate, formatAddress, cn } from \"@/lib/utils\"\nimport RegisterTab from \"./register-tab\"\nimport ResultsTab from \"./results-tab\"\nimport CampaignCountdown from \"./countdown-timer\"\nimport { ApolloClient, InMemoryCache, gql } from \"@apollo/client\"\nimport OverviewTab from \"./overview-tab\"\nimport VoteTab from \"./vote-tab\"\nimport { useVoterStatus } from \"@/hooks/use-voter-status\"\nimport MandatoryWalletConnectDialog from \"./mandatory-wallet-connect\"\n\n// GraphQL client setup\nconst client = new ApolloClient({\n  uri: \"https://api.studio.thegraph.com/query/101223/polytix-final/version/latest\", // Replace with your Subgraph URI\n  cache: new InMemoryCache(),\n})\n\n// GraphQL query (ensure this matches your subgraph schema)\nconst CAMPAIGN_DETAILS_QUERY = gql`\n  query CampaignDetails($id: String!) {\n    campaignCreateds(where: {campaignId: $id}, first: 1) {\n      creator\n      votingType\n      restriction\n      startTime\n      endTime\n      blockTimestamp\n      # Add other fields from CampaignCreated event if needed\n    }\n    # Optional: Fetch other relevant events if needed for initial load or fallback\n    voteCasts(where: {campaignId: $id}, first: 1000) { # Adjust 'first' as needed\n      voter\n      targetId\n    }\n    voterRegistereds(where: {campaignId: $id}, first: 1000) { # Adjust 'first' as needed\n      voter\n      tokenId\n    }\n    candidateAddeds(where: {campaignId: $id}, orderBy: candidateId, orderDirection: asc) {\n      candidateId\n      candidateAddress\n      name\n    }\n    proposalAddeds(where: {campaignId: $id}, orderBy: proposalId, orderDirection: asc) {\n      proposalId\n      content\n    }\n    # Fetch latest status change if your schema supports it\n    # campaignStatusChangeds(...) { ... }\n  }\n`\n\n// --- Component ---\nexport default function CampaignDetailsPage() {\n  const params = useParams()\n  const router = useRouter()\n  const campaignId = params.id\n  const { contract, address, isConnected, connect: connectWallet } = useContract()\n  // const { refetchEvents } = useSubgraph() // Keep if used elsewhere or for potential subgraph cache updates\n\n  // --- State ---\n  const [loading, setLoading] = useState(true) // Combined loading state\n  const [error, setError] = useState(null)\n  const [campaignInfo, setCampaignInfo] = useState(null)\n  const [proposals, setProposals] = useState([])\n  const [candidates, setCandidates] = useState([])\n  const [activeTab, setActiveTab] = useState(\"overview\")\n\n  // --- Custom Hook for Voter Status ---\n  const {\n    isLoading: voterStatusLoading,\n    isRegisteredVoter: userRegistered, // True if eligible based on registration rules\n    isRegisteredCandidate: isCandidate, // True if specifically a registered candidate\n    hasVoted: userVoted,\n    error: voterStatusError,\n    refetch: refetchVoterStatus,\n  } = useVoterStatus(campaignId)\n\n  // --- Derived State ---\n  const isOwner = useMemo(() => {\n    return (\n      isConnected && address && campaignInfo?.creator && campaignInfo.creator.toLowerCase() === address.toLowerCase()\n    )\n  }, [isConnected, address, campaignInfo?.creator])\n\n  const { isBeforeStart, isDuringVoting, isAfterEnd } = useMemo(() => {\n    if (!campaignInfo) return { isBeforeStart: false, isDuringVoting: false, isAfterEnd: false }\n    const now = Date.now()\n    const startTime = campaignInfo.startTime // Already in ms\n    const endTime = campaignInfo.endTime // Already in ms\n\n    return {\n      isBeforeStart: now < startTime,\n      isDuringVoting: now >= startTime && now < endTime,\n      isAfterEnd: now >= endTime,\n    }\n  }, [campaignInfo])\n\n  // Add debugging for voter status\n  useEffect(() => {\n    console.log(\"Voter status updated:\", {\n      isRegisteredVoter: userRegistered,\n      isRegisteredCandidate: isCandidate,\n      hasVoted: userVoted,\n      isLoading: voterStatusLoading,\n      error: voterStatusError,\n    })\n\n    // Log the register tab visibility\n    console.log(\"Register tab visibility:\", {\n      showRegisterTab: !isOwner && !isCandidate && !userRegistered && isBeforeStart && campaignInfo?.restriction === 2,\n      isOwner,\n      isCandidate,\n      userRegistered,\n      isBeforeStart,\n      restrictionType: campaignInfo?.restriction,\n    })\n  }, [\n    userRegistered,\n    isCandidate,\n    userVoted,\n    voterStatusLoading,\n    voterStatusError,\n    isOwner,\n    isBeforeStart,\n    campaignInfo,\n  ])\n\n  // --- Candidate Data Fetching Helper ---\n  const fetchCandidateDataFromContract = async (campaignId, initialCandidates) => {\n    if (!contract || !initialCandidates || initialCandidates.length === 0) {\n      console.warn(\"Contract not available or no candidates to fetch details for.\")\n      return initialCandidates.map((c) => ({ ...c, statement: \"Details unavailable\", imageHash: \"no-image\" }))\n    }\n\n    try {\n      console.log(`Fetching detailed data for ${initialCandidates.length} candidates from blockchain`)\n      const candidatePromises = initialCandidates.map(async (candidate) => {\n        try {\n          const candidateInfo = await contract.getCandidateInfo(campaignId, candidate.id)\n          // Indices: 0:addr, 1:name, 2:statement, 3:imageHash, 4:voteCount\n          return {\n            ...candidate,\n            // Use fetched name & address as primary, fallback to subgraph if needed\n            address: candidateInfo[0] || candidate.address,\n            name: candidateInfo[1] || candidate.name,\n            statement: candidateInfo[2] || \"No statement provided.\",\n            imageHash: candidateInfo[3] || \"no-image\",\n            // Vote count ideally comes from subgraph for efficiency, but can use contract as fallback\n            // voteCount: candidate.voteCount ?? Number(candidateInfo[4] ?? 0), // Example fallback\n          }\n        } catch (candidateErr) {\n          console.error(`Error fetching details for candidate ${candidate.id}:`, candidateErr)\n          return { ...candidate, statement: \"Error loading details\", imageHash: \"no-image\" } // Indicate error\n        }\n      })\n      const resolvedCandidates = await Promise.all(candidatePromises)\n      console.log(\"Completed fetching candidate details from blockchain.\")\n      return resolvedCandidates\n    } catch (err) {\n      console.error(\"Failed to fetch candidate data batch from contract:\", err)\n      return initialCandidates.map((c) => ({ ...c, statement: \"Error loading details\", imageHash: \"no-image\" }))\n    }\n  }\n\n  // --- Main Data Fetching Function ---\n  const fetchCampaignData = async () => {\n    if (!isConnected || !campaignId) {\n      if (!campaignId) setError(\"Campaign ID is missing.\")\n      setLoading(false)\n      return\n    }\n\n    setLoading(true)\n    setError(null)\n    console.log(\"Fetching campaign data...\")\n\n    try {\n      // Step 1: Fetch from Subgraph\n      console.log(\"Fetching from Subgraph...\")\n      const { data, error: queryError } = await client.query({\n        query: CAMPAIGN_DETAILS_QUERY,\n        variables: { id: String(campaignId) },\n        fetchPolicy: \"network-only\",\n      })\n\n      if (queryError) throw queryError\n      if (!data?.campaignCreateds?.length) {\n        throw new Error(\"Campaign not found in subgraph.\")\n      }\n\n      const campaignCreatedEvent = data.campaignCreateds[0]\n      const subgraphVotes = data.voteCasts || []\n      const subgraphRegistrations = data.voterRegistereds || []\n      const subgraphCandidatesAdded = data.candidateAddeds || []\n      const subgraphProposalsAdded = data.proposalAddeds || []\n\n      // Step 2: Fetch Base Info & Items from Contract (more reliable source)\n      console.log(\"Fetching base info and items from Contract...\")\n      if (!contract) throw new Error(\"Contract instance not available.\")\n\n      const basicInfo = await contract.getCampaignBasicInfo(campaignId)\n      const [votingType, restriction, resultType, creator, description] = basicInfo\n\n      let items = []\n      let itemCount = 0\n      if (Number(votingType) === 1) {\n        // Proposal-Based\n        const proposalCount = await contract.getProposalIds(campaignId)\n        itemCount = Number(proposalCount)\n        const proposalPromises = []\n        for (let i = 0; i < itemCount; i++) {\n          proposalPromises.push(contract.getProposalContent(campaignId, i))\n        }\n        const contents = await Promise.all(proposalPromises)\n        items = contents.map((content, i) => {\n          const voteCount = subgraphVotes.filter((v) => String(v.targetId) === String(i)).length // Use subgraph for vote counts\n          return { id: i, content, voteCount }\n        })\n        setProposals(items)\n        setCandidates([]) // Clear candidates\n      } else {\n        // Candidate-Based\n        const candidateCount = await contract.getCandidateIds(campaignId)\n        itemCount = Number(candidateCount)\n        // Prepare initial candidate structures using subgraph add events as fallback for name/address\n        const initialCandidates = []\n        for (let i = 0; i < itemCount; i++) {\n          const addedEvent = subgraphCandidatesAdded.find((c) => Number(c.candidateId) === i)\n          const voteCount = subgraphVotes.filter((v) => String(v.targetId) === String(i)).length // Use subgraph for vote counts\n          initialCandidates.push({\n            id: i,\n            name: addedEvent?.name || `Candidate ${i}`, // Use subgraph name if available\n            address: addedEvent?.candidateAddress || \"0x...\", // Use subgraph address if available\n            statement: \"Loading details...\",\n            imageHash: \"loading\",\n            voteCount: voteCount,\n          })\n        }\n        // Fetch full details from contract (will overwrite name/address too)\n        items = await fetchCandidateDataFromContract(campaignId, initialCandidates)\n        setCandidates(items)\n        setProposals([]) // Clear proposals\n      }\n\n      // Step 3: Combine into Campaign Info State\n      const combinedInfo = {\n        id: campaignId,\n        votingType: Number(votingType),\n        restriction: Number(restriction),\n        resultType: Number(resultType),\n        creator: creator,\n        description: description || `Campaign #${campaignId}`, // Use contract desc\n        startTime: Number(campaignCreatedEvent.startTime) * 1000, // Use subgraph time\n        endTime: Number(campaignCreatedEvent.endTime) * 1000, // Use subgraph time\n        totalVotes: subgraphVotes.length, // Use subgraph count\n        itemCount: itemCount, // Use contract count\n        registeredVoterCount: subgraphRegistrations.length, // Use subgraph count (can be inaccurate if NFTs burned)\n        // status: ... // Determine status based on time or contract call if available\n      }\n      setCampaignInfo(combinedInfo)\n\n      // Step 4: Determine Initial Active Tab (using combinedInfo and latest voter status)\n      // Refetch voter status *after* setting campaignInfo as it might depend on restriction type\n      const updatedVoterStatus = await refetchVoterStatus() // Assuming refetch returns the status\n\n      const now = Date.now()\n      const isAfter = now >= combinedInfo.endTime\n      const isDuring = now >= combinedInfo.startTime && now < combinedInfo.endTime\n      const isBefore = now < combinedInfo.startTime\n\n      const owner = isConnected && address && combinedInfo.creator.toLowerCase() === address.toLowerCase()\n\n      const isEligibleToVote = !owner && !updatedVoterStatus.isCandidate && updatedVoterStatus.isRegisteredVoter\n      const canCurrentlyVote = isEligibleToVote && isDuring && !updatedVoterStatus.hasVoted\n\n      const canCurrentlyRegister =\n        !owner &&\n        !updatedVoterStatus.isCandidate &&\n        !updatedVoterStatus.isRegisteredVoter &&\n        isBefore &&\n        combinedInfo.restriction === 2\n\n      const showResults = owner || isDuring || isAfter\n\n      let idealTab = \"overview\"\n      if (isAfter) {\n        idealTab = \"results\"\n      } else if (canCurrentlyVote) {\n        idealTab = \"vote\"\n      } else if (canCurrentlyRegister) {\n        idealTab = \"register\"\n      }\n\n      // Check if ideal tab is actually visible\n      let finalTab = \"overview\"\n      if (idealTab === \"results\" && showResults) finalTab = \"results\"\n      else if (idealTab === \"vote\" && canCurrentlyVote)\n        finalTab = \"vote\" // Use direct condition\n      else if (idealTab === \"register\" && canCurrentlyRegister) finalTab = \"register\" // Use direct condition\n\n      setActiveTab(finalTab)\n    } catch (err) {\n      console.error(\"Error fetching campaign details:\", err)\n      setError(err.message || \"Failed to load campaign details. Please check the console and try again.\")\n      // Clear state on error\n      setCampaignInfo(null)\n      setProposals([])\n      setCandidates([])\n    } finally {\n      setLoading(false)\n      console.log(\"Finished fetching campaign data.\")\n    }\n  }\n\n  // --- Effects ---\n  useEffect(() => {\n    // Initial fetch or fetch when dependencies change\n    if (campaignId && isConnected && contract) {\n      // Ensure contract is available too\n      fetchCampaignData()\n    } else if (!isConnected) {\n      // Clear state if disconnected\n      setCampaignInfo(null)\n      setProposals([])\n      setCandidates([])\n      setError(null)\n      setLoading(true) // Set back to loading state until connection\n    }\n    // Intentionally excluding address from deps here to avoid refetch on account switch *unless* needed by voterStatus logic\n  }, [campaignId, isConnected, contract]) // Depend on contract instance\n\n  // --- Event Handlers ---\n  const handleRegistrationSuccess = async () => {\n    console.log(\"Registration successful, refetching status and data...\")\n    // Optimistic UI update (optional, handled by refetch mostly)\n    setCampaignInfo((prev) => (prev ? { ...prev, registeredVoterCount: (prev.registeredVoterCount ?? 0) + 1 } : null))\n    await refetchVoterStatus() // Refetch voter status first\n    // No need to fully refetch all campaign data usually, status update is enough\n    // fetchCampaignData(); // Optionally refetch all if needed\n    setActiveTab(\"overview\") // Navigate away from register tab\n    // Consider refetching subgraph events if UI relies heavily on subgraph counts\n    // if (refetchEvents) refetchEvents();\n  }\n\n  const handleVoteSuccess = async (votedItemId) => {\n    console.log(\"Vote successful, refetching status...\")\n    // Optimistic UI update (optional, handled by refetch mostly)\n    setCampaignInfo((prev) => (prev ? { ...prev, totalVotes: (prev.totalVotes ?? 0) + 1 } : null))\n    if (campaignInfo?.votingType === 1) {\n      setProposals((prev) => prev.map((p) => (p.id === votedItemId ? { ...p, voteCount: (p.voteCount ?? 0) + 1 } : p)))\n    } else {\n      setCandidates((prev) => prev.map((c) => (c.id === votedItemId ? { ...c, voteCount: (c.voteCount ?? 0) + 1 } : c)))\n    }\n    await refetchVoterStatus() // Refetch voter status\n    setActiveTab(\"results\") // Navigate to results after voting\n    // Consider refetching subgraph events\n    // if (refetchEvents) refetchEvents();\n  }\n\n  // --- Status Message Component ---\n  const StatusMessage = () => {\n    if (isOwner) {\n      return (\n        <Alert className=\"border-purple-200 bg-purple-50 text-purple-800 dark:border-purple-900 dark:bg-purple-950/30 dark:text-purple-300\">\n          <Award className=\"h-4 w-4 !text-purple-500\" />\n          <AlertTitle className=\"font-semibold\">Campaign Owner</AlertTitle>\n          <AlertDescription>\n            You created this campaign. Sit back, relax, and watch the votes come in! 🍿\n          </AlertDescription>\n        </Alert>\n      )\n    }\n\n    if (voterStatusLoading && !campaignInfo) {\n      // Show status loading only if main data isn't loaded yet\n      return (\n        <Alert className=\"border-blue-200 bg-blue-50 dark:border-blue-900 dark:bg-blue-950/30\">\n          <RefreshCw className=\"h-4 w-4 animate-spin\" />\n          <AlertTitle>Loading Status</AlertTitle>\n          <AlertDescription>Checking your connection and eligibility...</AlertDescription>\n        </Alert>\n      )\n    }\n    if (voterStatusError) {\n      return (\n        <Alert variant=\"destructive\">\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertTitle>Status Error</AlertTitle>\n          <AlertDescription>{voterStatusError}</AlertDescription>\n        </Alert>\n      )\n    }\n\n    // --- Messages based on Campaign Phase & User Status ---\n    const baseClasses = \"border\"\n    const textClasses = \"\" // Removed flex, rely on Alert structure\n\n    if (isAfterEnd) {\n      return (\n        <Alert className={cn(baseClasses, \"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/30\")}>\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertTitle>Campaign Ended</AlertTitle>\n          <AlertDescription className={textClasses}>\n            The voting period is over. Check the 'Results' tab for the outcome.\n          </AlertDescription>\n        </Alert>\n      )\n    }\n\n    if (isBeforeStart) {\n      if (isCandidate) {\n        return (\n          <Alert\n            className={cn(\n              baseClasses,\n              \"border-green-200 bg-green-50 text-green-800 dark:border-green-900 dark:bg-green-950/30 dark:text-green-300\",\n            )}\n          >\n            <Award className=\"h-4 w-4 !text-green-500\" />\n            <AlertTitle>Candidate Registered</AlertTitle>\n            <AlertDescription className={textClasses}>\n              You're registered as a candidate! Voting starts soon. Good luck!\n            </AlertDescription>\n          </Alert>\n        )\n      }\n      if (campaignInfo?.restriction === 2 && !userRegistered) {\n        return (\n          <Alert variant=\"warning\" className={cn(baseClasses)}>\n            <AlertCircle className=\"h-4 w-4\" />\n            <AlertTitle>Registration Required</AlertTitle>\n            <AlertDescription className={textClasses}>\n              This campaign requires registration. Head to the 'Register' tab before voting begins.\n            </AlertDescription>\n          </Alert>\n        )\n      }\n      return (\n        <Alert\n          className={cn(\n            baseClasses,\n            \"border-blue-200 bg-blue-50 text-blue-800 dark:border-blue-900 dark:bg-blue-950/30 dark:text-blue-300\",\n          )}\n        >\n          <Clock className=\"h-4 w-4 !text-blue-500\" />\n          <AlertTitle>Upcoming Campaign</AlertTitle>\n          <AlertDescription className={textClasses}>\n            {userRegistered ? \"You are eligible!\" : \"This campaign is open!\"} Voting will begin soon.\n          </AlertDescription>\n        </Alert>\n      )\n    }\n\n    if (isDuringVoting) {\n      if (isCandidate) {\n        // Handled case where candidate missed required registration (cannot vote)\n        if (campaignInfo?.restriction === 2 && !userRegistered) {\n          return (\n            <Alert variant=\"warning\" className={cn(baseClasses)}>\n              <AlertCircle className=\"h-4 w-4\" />\n              <AlertTitle>Registration Missed</AlertTitle>\n              <AlertDescription className={textClasses}>\n                As a candidate, you were also required to register but didn't. You cannot vote in this campaign.\n              </AlertDescription>\n            </Alert>\n          )\n        }\n        return (\n          <Alert\n            className={cn(\n              baseClasses,\n              \"border-green-200 bg-green-50 text-green-800 dark:border-green-900 dark:bg-green-950/30 dark:text-green-300\",\n            )}\n          >\n            <Award className=\"h-4 w-4 !text-green-500\" />\n            <AlertTitle>Candidate Status</AlertTitle>\n            <AlertDescription className={textClasses}>\n              You are a candidate. Voting is active. {userVoted ? \"You have already cast your vote.\" : \"\"}\n            </AlertDescription>\n          </Alert>\n        )\n      }\n      if (userVoted) {\n        return (\n          <Alert\n            className={cn(\n              baseClasses,\n              \"border-green-200 bg-green-50 text-green-800 dark:border-green-900 dark:bg-green-950/30 dark:text-green-300\",\n            )}\n          >\n            <Check className=\"h-4 w-4 !text-green-500\" />\n            <AlertTitle>Vote Cast</AlertTitle>\n            <AlertDescription className={textClasses}>\n              Thank you for participating! Your vote has been securely recorded.\n            </AlertDescription>\n          </Alert>\n        )\n      }\n      if (!userRegistered && campaignInfo?.restriction === 2) {\n        return (\n          <Alert variant=\"warning\" className={cn(baseClasses)}>\n            <AlertCircle className=\"h-4 w-4\" />\n            <AlertTitle>Registration Required</AlertTitle>\n            <AlertDescription className={textClasses}>\n              Registration was required for this campaign, but you are not registered. You cannot vote.\n            </AlertDescription>\n          </Alert>\n        )\n      }\n      // Eligible to vote\n      return (\n        <Alert\n          className={cn(\n            baseClasses,\n            \"border-blue-200 bg-blue-50 text-blue-800 dark:border-blue-900 dark:bg-blue-950/30 dark:text-blue-300\",\n          )}\n        >\n          <Vote className=\"h-4 w-4 !text-blue-500\" />\n          <AlertTitle>Voting Active</AlertTitle>\n          <AlertDescription className={textClasses}>\n            The polls are open! Proceed to the 'Vote' tab to make your choice.\n          </AlertDescription>\n        </Alert>\n      )\n    }\n\n    return null // Fallback\n  }\n\n  // --- Tab Visibility Logic ---\n  const showOverviewTab = true\n  const showRegisterTab =\n    !isOwner && !isCandidate && !userRegistered && isBeforeStart && campaignInfo?.restriction === 2\n\n  // Make sure the register tab is not shown if the user is already registered\n  const showVoteTab = !isOwner && !isCandidate && userRegistered && isDuringVoting && !userVoted\n  const showResultsTab = isOwner || isAfterEnd || isDuringVoting\n\n  // Calculate number of visible tabs for dynamic grid layout\n  const visibleTabCount = [showOverviewTab, showRegisterTab, showVoteTab, showResultsTab].filter(Boolean).length\n  const tabGridColsClass = `grid-cols-${visibleTabCount > 0 ? visibleTabCount : 1}` // Avoid grid-cols-0\n\n  // ================= RENDER LOGIC =================\n\n  // --- 1. Show Mandatory Connect Dialog ---\n  if (!isConnected) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen bg-gradient-to-br from-background to-blue-50 dark:from-gray-900 dark:to-blue-950\">\n        <MandatoryWalletConnectDialog onConnectWallet={connectWallet} onGoBack={() => router.push(\"/campaigns\")} />\n      </div>\n    )\n  }\n\n  // --- 2. Show Loading State ---\n  if (loading || (voterStatusLoading && !campaignInfo)) {\n    // Show loading if main data OR voter status is loading initially\n    return (\n      <div className=\"container max-w-5xl mx-auto py-10 mt-16 md:mt-20\">\n        {/* Enhanced Skeleton Layout */}\n        <div className=\"mb-6\">\n          <Skeleton className=\"h-5 w-28\" />\n        </div>\n        <div className=\"text-center mb-10 space-y-3\">\n          <Skeleton className=\"h-10 w-3/4 mx-auto\" />\n          <div className=\"flex justify-center gap-2\">\n            <Skeleton className=\"h-6 w-20 rounded-full\" />\n            <Skeleton className=\"h-6 w-24 rounded-full\" />\n            <Skeleton className=\"h-6 w-28 rounded-full\" />\n          </div>\n          <Skeleton className=\"h-4 w-40 mx-auto\" />\n        </div>\n        <Skeleton className=\"h-28 w-full mb-6 rounded-lg\" /> {/* Countdown Card Skeleton */}\n        <Skeleton className=\"h-16 w-full mb-8 rounded-lg\" /> {/* Status Alert Skeleton */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-8\">\n          {[1, 2, 3].map((i) => (\n            <Skeleton key={i} className=\"h-32 w-full rounded-lg\" />\n          ))}\n        </div>\n        <Skeleton className=\"h-10 w-full mb-6 rounded-lg\" /> {/* Tabs List Skeleton */}\n        <Skeleton className=\"h-64 w-full rounded-lg\" /> {/* Tab Content Skeleton */}\n      </div>\n    )\n  }\n\n  // --- 3. Show Error State ---\n  if (error) {\n    return (\n      <div className=\"container max-w-3xl mx-auto py-10 mt-20 text-center\">\n        <Alert variant=\"destructive\" className=\"text-left mb-6\">\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertTitle>Error Loading Campaign</AlertTitle>\n          <AlertDescription>{error}</AlertDescription>\n        </Alert>\n        <div className=\"flex justify-center gap-4\">\n          <Button variant=\"outline\" onClick={() => router.push(\"/campaigns\")}>\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Back to Campaigns\n          </Button>\n          <Button onClick={fetchCampaignData}>\n            <RefreshCw className=\"h-4 w-4 mr-2\" />\n            Retry\n          </Button>\n        </div>\n      </div>\n    )\n  }\n\n  // --- 4. Show \"Not Found\" State ---\n  if (!campaignInfo) {\n    return (\n      <div className=\"container max-w-3xl mx-auto py-10 mt-20 text-center\">\n        <Alert className=\"mb-6\">\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertTitle>Campaign Not Found</AlertTitle>\n          <AlertDescription>The requested campaign data could not be loaded or does not exist.</AlertDescription>\n        </Alert>\n        <Button variant=\"outline\" onClick={() => router.push(\"/campaigns\")}>\n          <ArrowLeft className=\"h-4 w-4 mr-2\" />\n          Back to Campaigns\n        </Button>\n      </div>\n    )\n  }\n\n  // --- 5. Render Main Content ---\n  return (\n    <div className=\"container max-w-5xl mx-auto py-10 mt-16 md:mt-20\">\n      {/* Back button */}\n      <div className=\"mb-6\">\n        <Button variant=\"ghost\" size=\"sm\" className=\"text-muted-foreground hover:text-foreground px-2\" asChild>\n          \n        </Button>\n      </div>\n\n      {/* Campaign Title Area */}\n      <header className=\"text-center mb-10\">\n        <h1 className=\"text-3xl md:text-4xl font-bold tracking-tight break-words mb-3\">{campaignInfo.description}</h1>\n        <div className=\"flex justify-center items-center flex-wrap gap-2 mb-3\">\n          {/* Status Badge */}\n          <Badge\n            variant={isDuringVoting ? \"default\" : isAfterEnd ? \"secondary\" : \"outline\"}\n            className={cn(\n              \"text-xs font-medium px-2.5 py-0.5\", // Common badge styles\n              isDuringVoting &&\n                \"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200 border-green-300 dark:border-green-700\",\n              isBeforeStart &&\n                \"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200 border-blue-300 dark:border-blue-700\",\n              isAfterEnd &&\n                \"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300 border-gray-300 dark:border-gray-600\",\n            )}\n          >\n            {isBeforeStart ? \"Upcoming\" : isDuringVoting ? \"Active\" : \"Ended\"}\n          </Badge>\n          {/* Type Badge */}\n          <Badge variant=\"outline\" className=\"text-xs font-medium px-2.5 py-0.5\">\n            {campaignInfo.votingType === 0 ? \"Candidate-Based\" : \"Proposal-Based\"}\n          </Badge>\n          {/* Restriction Badge */}\n          <Badge variant=\"outline\" className=\"text-xs font-medium px-2.5 py-0.5\">\n            {campaignInfo.restriction === 0\n              ? \"Open To All\"\n              : campaignInfo.restriction === 1\n                ? \"Limited Access\"\n                : \"Registration Required\"}\n          </Badge>\n          {/* Role Badge (if applicable) */}\n          {isOwner && (\n            <Badge\n              variant=\"outline\"\n              className=\"text-xs font-medium px-2.5 py-0.5 bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-200 border-purple-300 dark:border-purple-700\"\n            >\n              <Award className=\"h-3 w-3 mr-1\" /> Owner\n            </Badge>\n          )}\n          {isCandidate &&\n            !isOwner && ( // Show only if not owner\n              <Badge\n                variant=\"outline\"\n                className=\"text-xs font-medium px-2.5 py-0.5 bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-200 border-indigo-300 dark:border-indigo-700\"\n              >\n                <Users className=\"h-3 w-3 mr-1\" /> Candidate\n              </Badge>\n            )}\n        </div>\n        <p className=\"text-sm text-muted-foreground\">\n          Created by: <span className=\"font-mono text-xs\">{formatAddress(campaignInfo.creator)}</span>\n        </p>\n      </header>\n\n      {/* Countdown Timer Card */}\n      <Card className=\"mb-6 border-border/40 bg-background/30 dark:bg-gray-800/20 backdrop-blur-sm shadow-sm\">\n        <CardContent className=\"pt-6 text-center\">\n          <h2 className=\"text-base font-semibold mb-3 text-muted-foreground tracking-wide uppercase\">\n            {isBeforeStart ? \"Voting Starts In\" : isDuringVoting ? \"Voting Ends In\" : \"Campaign Status\"}\n          </h2>\n          {!isAfterEnd ? (\n            <CampaignCountdown\n              endTime={isBeforeStart ? campaignInfo.startTime : campaignInfo.endTime}\n              className=\"text-2xl md:text-3xl font-semibold text-foreground\"\n            />\n          ) : (\n            <div className=\"text-lg font-medium text-muted-foreground\">Voting Period Ended</div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Status Message Alert */}\n      <div className=\"mb-8\">\n        <StatusMessage />\n      </div>\n\n      {/* Campaign Stats Grid */}\n      <section aria-labelledby=\"stats-heading\" className=\"mb-10\">\n        <h2 id=\"stats-heading\" className=\"sr-only\">\n          Campaign Statistics\n        </h2>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {/* Timeline Card */}\n          <Card className=\"border-border/40 bg-background/30 dark:bg-gray-800/20 backdrop-blur-sm shadow-sm\">\n            <CardContent className=\"pt-5 pb-5\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 bg-blue-100 dark:bg-blue-900/40 rounded-md\">\n                  <CalendarClock className=\"h-5 w-5 text-blue-600 dark:text-blue-300\" />\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-sm\">Timeline</h3>\n                  <div className=\"text-xs text-muted-foreground mt-1\">\n                    <div>Start: {formatDate(campaignInfo.startTime)}</div>\n                    <div>End: {formatDate(campaignInfo.endTime)}</div>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n          {/* Participation Card */}\n          <Card className=\"border-border/40 bg-background/30 dark:bg-gray-800/20 backdrop-blur-sm shadow-sm\">\n            <CardContent className=\"pt-5 pb-5\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 bg-green-100 dark:bg-green-900/40 rounded-md\">\n                  <Users className=\"h-5 w-5 text-green-600 dark:text-green-300\" />\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-sm\">Participation</h3>\n                  <div className=\"text-xs text-muted-foreground mt-1\">\n                    <div>Votes Cast: {campaignInfo.totalVotes ?? 0}</div>\n                    {campaignInfo.restriction !== 0 && <div>Registered: {campaignInfo.registeredVoterCount ?? 0}</div>}\n                    <div>\n                      {campaignInfo.votingType === 0 ? \"Candidates\" : \"Proposals\"}: {campaignInfo.itemCount ?? 0}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n          {/* Your Status Card */}\n          <Card className=\"border-border/40 bg-background/30 dark:bg-gray-800/20 backdrop-blur-sm shadow-sm\">\n            <CardContent className=\"pt-5 pb-5\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-md\">\n                  <Clock className=\"h-5 w-5 text-purple-600 dark:text-purple-300\" />\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-sm\">Your Status</h3>\n                  <div className=\"text-xs text-muted-foreground mt-1\">\n                    {voterStatusLoading ? (\n                      <span className=\"inline-flex items-center\">\n                        <RefreshCw className=\"h-3 w-3 mr-1 animate-spin\" /> Checking...\n                      </span>\n                    ) : voterStatusError ? (\n                      <span className=\"text-red-600 dark:text-red-400\">Error checking status</span>\n                    ) : (\n                      <div className=\"space-y-0.5\">\n                        {/* Eligibility */}\n                        <div>\n                          <span className=\"font-medium\">Eligibility:</span>{\" \"}\n                          {isOwner ? (\n                            <span className=\"text-purple-700 dark:text-purple-300 font-semibold\">Owner</span>\n                          ) : isCandidate ? (\n                            <span className=\"text-indigo-700 dark:text-indigo-300 font-semibold\">Candidate</span>\n                          ) : campaignInfo.restriction === 0 ? (\n                            <span className=\"text-gray-600 dark:text-gray-400\">Open Access</span>\n                          ) : userRegistered ? (\n                            <span className=\"text-green-700 dark:text-green-300\">Eligible</span>\n                          ) : (\n                            <span className=\"text-red-600 dark:text-red-400\">Not Eligible/Registered</span>\n                          )}\n                        </div>\n                        {/* Vote Status */}\n                        {!isOwner && !isCandidate && (\n                          <div>\n                            <span className=\"font-medium\">Vote:</span>{\" \"}\n                            {userVoted ? (\n                              <span className=\"text-green-700 dark:text-green-300\">Voted</span>\n                            ) : (\n                              <span>Not Voted Yet</span>\n                            )}\n                          </div>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </section>\n\n      {/* Tabs Section */}\n      <section aria-labelledby=\"campaign-details-tabs\">\n        <h2 id=\"campaign-details-tabs\" className=\"sr-only\">\n          Campaign Details and Actions\n        </h2>\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n          {/* Dynamically set grid columns based on visible tabs */}\n          <TabsList\n            className={cn(\"grid w-full mb-6 bg-muted/40 dark:bg-gray-800/30 p-1 h-auto rounded-lg\", tabGridColsClass)}\n          >\n            {showOverviewTab && (\n              <TabsTrigger value=\"overview\" className=\"text-xs sm:text-sm\">\n                Overview\n              </TabsTrigger>\n            )}\n            {showRegisterTab && (\n              <TabsTrigger value=\"register\" className=\"text-xs sm:text-sm\">\n                Register\n              </TabsTrigger>\n            )}\n            {showVoteTab && (\n              <TabsTrigger value=\"vote\" className=\"text-xs sm:text-sm\">\n                Vote\n              </TabsTrigger>\n            )}\n            {showResultsTab && (\n              <TabsTrigger value=\"results\" className=\"text-xs sm:text-sm\">\n                Results\n              </TabsTrigger>\n            )}\n          </TabsList>\n\n          {/* Tab Content Panes */}\n          {showOverviewTab && (\n            <TabsContent value=\"overview\" className=\"mt-0\">\n              <OverviewTab\n                campaignInfo={campaignInfo}\n                proposals={proposals}\n                candidates={candidates}\n                isOwner={isOwner}\n                isCandidate={isCandidate}\n                isRegisteredVoter={userRegistered}\n                isBeforeStart={isBeforeStart}\n                isDuringVoting={isDuringVoting}\n                isAfterEnd={isAfterEnd}\n              />\n            </TabsContent>\n          )}\n          {/* Only render the register tab if showRegisterTab is true */}\n          {showRegisterTab && (\n            <TabsContent value=\"register\" className=\"mt-0\">\n              <RegisterTab\n                campaignInfo={campaignInfo}\n                contract={contract}\n                campaignId={campaignId}\n                isConnected={isConnected}\n                connectWallet={connectWallet}\n                onRegistrationSuccess={handleRegistrationSuccess}\n              />\n            </TabsContent>\n          )}\n          {showVoteTab && (\n            <TabsContent value=\"vote\" className=\"mt-0\">\n              <VoteTab\n                campaignInfo={campaignInfo}\n                proposals={proposals}\n                candidates={candidates} // Pass fetched candidates\n                contract={contract}\n                campaignId={campaignId}\n                isConnected={isConnected}\n                connectWallet={connectWallet}\n                onVoteSuccess={handleVoteSuccess}\n              />\n            </TabsContent>\n          )}\n          {showResultsTab && (\n            <TabsContent value=\"results\" className=\"mt-0\">\n              <ResultsTab\n                campaignInfo={campaignInfo}\n                proposals={proposals}\n                candidates={candidates} // Pass fetched candidates\n                isOwner={isOwner}\n                isDuringVoting={isDuringVoting}\n                isAfterEnd={isAfterEnd}\n                // Pass other necessary props like contract/campaignId if needed by ResultsTab\n              />\n            </TabsContent>\n          )}\n        </Tabs>\n      </section>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}