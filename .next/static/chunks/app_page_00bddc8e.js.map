{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///mnt/windows_d/manov/code/polytix-v1/app/page.js"],"sourcesContent":["\"use client\"\nimport { useEffect, useState } from 'react'\nimport { useContract } from '@/context/contract-context'\nimport { X } from 'lucide-react'\n\n// Wallet Connection Dialog Component\nconst WalletConnectionDialog = ({ onClose }) => {\n  const { connectWallet } = useContract()\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\n      <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-full\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">Connect Your Wallet</h3>\n          <button onClick={onClose} className=\"text-gray-500 hover:text-gray-700\">\n            <X size={20} />\n          </button>\n        </div>\n        \n        <div className=\"mb-6\">\n          <p className=\"text-gray-700 dark:text-gray-300 mb-4\">\n            This application works best when connected to your wallet. Connect to access all features and participate in campaigns.\n          </p>\n          \n          <div className=\"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 p-4 mb-4\">\n            <p className=\"font-medium text-blue-700 dark:text-blue-300 mb-1\">Safe to use:</p>\n            <ul className=\"list-disc pl-5 text-gray-600 dark:text-gray-400\">\n              <li>No funds will be used unless you explicitly sign a transaction</li>\n              <li>You'll always be asked for confirmation before signing</li>\n              <li>You can disconnect your wallet at any time</li>\n            </ul>\n          </div>\n        </div>\n        \n        <div className=\"flex justify-center\">\n          <button \n            onClick={connectWallet}\n            className=\"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors\"\n          >\n            Connect Wallet\n          </button>\n        </div>\n        \n        <p className=\"text-xs text-center text-gray-500 mt-4\">\n          By connecting, you're only giving permission to view your address. Full permission is only requested when you interact with contracts.\n        </p>\n      </div>\n    </div>\n  )\n}\n\n// Updated Page Component\nconst Page = () => {\n  const { contract, address, chainId, isConnected, provider } = useContract();\n  const [showDialog, setShowDialog] = useState(false)\n  \n  const listenForEvents = async () => {\n    if (contract) {\n      contract.on(\"CampaignCreated\", (campaignId, creator, votingType, restriction, startTime, endTime, event) => {\n        console.log(\"New Campaign Created, listened:\", {\n          campaignId: campaignId.toString(),\n          creator,\n          votingType,\n          restriction,\n          startTime: startTime.toString(),\n          endTime: endTime.toString(),\n          transactionHash: event.transactionHash\n        });\n      });\n    }\n  };\n  \n  useEffect(() => {\n    if (contract) {\n      listenForEvents();\n    }\n  }, [contract]);\n  \n  // Show dialog when user is not connected\n  useEffect(() => {\n    if (!isConnected) {\n      // Small delay to avoid flash on initial load\n      const timer = setTimeout(() => {\n        setShowDialog(true)\n      }, 1000)\n      \n      return () => clearTimeout(timer)\n    } else {\n      setShowDialog(false)\n    }\n  }, [isConnected]);\n  \n  return (\n    <div>\n      <HeroSection />\n      <HowItWorksSection />\n      <ActiveCampaigns />\n      <FeaturesSection />\n      <CTASection />\n      \n      {showDialog && <WalletConnectionDialog onClose={() => setShowDialog(false)} />}\n    </div>\n  )\n}\n\nexport default Page"],"names":[],"mappings":";;;;AACA;AACA;AACA;;;AAHA;;;;AAKA,qCAAqC;AACrC,MAAM,yBAAyB,CAAC,EAAE,OAAO,EAAE;;IACzC,MAAM,EAAE,aAAa,EAAE,GAAG,CAAA,GAAA,kIAAA,CAAA,cAAW,AAAD;IAEpC,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAAyD;;;;;;sCACvE,6LAAC;4BAAO,SAAS;4BAAS,WAAU;sCAClC,cAAA,6LAAC,+LAAA,CAAA,IAAC;gCAAC,MAAM;;;;;;;;;;;;;;;;;8BAIb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAE,WAAU;sCAAwC;;;;;;sCAIrD,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAE,WAAU;8CAAoD;;;;;;8CACjE,6LAAC;oCAAG,WAAU;;sDACZ,6LAAC;sDAAG;;;;;;sDACJ,6LAAC;sDAAG;;;;;;sDACJ,6LAAC;sDAAG;;;;;;;;;;;;;;;;;;;;;;;;8BAKV,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;8BAKH,6LAAC;oBAAE,WAAU;8BAAyC;;;;;;;;;;;;;;;;;AAM9D;GA3CM;;QACsB,kIAAA,CAAA,cAAW;;;KADjC;AA6CN,yBAAyB;AACzB,MAAM,OAAO;;IACX,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,OAAO,EAAE,WAAW,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,kIAAA,CAAA,cAAW,AAAD;IACxE,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,MAAM,kBAAkB;QACtB,IAAI,UAAU;YACZ,SAAS,EAAE,CAAC,mBAAmB,CAAC,YAAY,SAAS,YAAY,aAAa,WAAW,SAAS;gBAChG,QAAQ,GAAG,CAAC,mCAAmC;oBAC7C,YAAY,WAAW,QAAQ;oBAC/B;oBACA;oBACA;oBACA,WAAW,UAAU,QAAQ;oBAC7B,SAAS,QAAQ,QAAQ;oBACzB,iBAAiB,MAAM,eAAe;gBACxC;YACF;QACF;IACF;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;0BAAE;YACR,IAAI,UAAU;gBACZ;YACF;QACF;yBAAG;QAAC;KAAS;IAEb,yCAAyC;IACzC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;0BAAE;YACR,IAAI,CAAC,aAAa;gBAChB,6CAA6C;gBAC7C,MAAM,QAAQ;4CAAW;wBACvB,cAAc;oBAChB;2CAAG;gBAEH;sCAAO,IAAM,aAAa;;YAC5B,OAAO;gBACL,cAAc;YAChB;QACF;yBAAG;QAAC;KAAY;IAEhB,qBACE,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC;;;;;0BACD,6LAAC;;;;;0BACD,6LAAC;;;;;0BACD,6LAAC;;;;;YAEA,4BAAc,6LAAC;gBAAuB,SAAS,IAAM,cAAc;;;;;;;;;;;;AAG1E;IAnDM;;QAC0D,kIAAA,CAAA,cAAW;;;MADrE;uCAqDS","debugId":null}}]
}